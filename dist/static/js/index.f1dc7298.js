(()=>{"use strict";var e,t,l,i,a={1009:function(e,t,l){e.exports=l.p+"static/image/1.11802792.png"},76346:function(e,t,l){e.exports=l.p+"static/image/2.fe4e1d59.png"},99678:function(e,t,l){e.exports=l.p+"static/svg/bladed 1.ab3a43bf.svg"},27358:function(e,t,l){var i=l(8756),a=l(70946),n=l(66262);let o=(0,n.default)({},[["render",function(e,t){let l=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(l)])}]]);var s=l(20156);let r={key:0,class:"loading-overlay"},d={class:"home-main"},u={class:"navigation-section"},c={class:"navigation-grid"},v={class:"feature-cards"},p={class:"card-icon"},h={class:"card-title"},g={class:"card-description"},m={class:"stats-section"},f={class:"stats-grid"},k={class:"stat-number"},b={class:"stat-label"},y=(0,i.pM)({__name:"index",setup(e){let t=(0,i.KR)(!1),l=(0,i.KR)(""),a=[{id:1,title:"任务管理",description:"轻松创建、分配和跟踪项目任务进度",link:"/wbs",buttonText:"管理任务",icon:"el-icon-todo-list"},{id:2,title:"团队协作",description:"高效的团队协作工具，提升项目执行效率",link:"/about",buttonText:"了解更多",icon:"el-icon-user"}],n=[{id:1,number:"12+",label:"活跃项目"},{id:2,number:"10+",label:"团队成员"},{id:3,number:"98%",label:"按时完成率"}],o=(e,t)=>{e?l.value=t:l.value=""};return(0,i.sV)(()=>{setTimeout(()=>{t.value=!0},500)}),(e,y)=>((0,i.uX)(),(0,i.CE)("div",{class:(0,i.C4)(["home-container",{"home-container-loaded":t.value}])},[t.value?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",r,[...y[6]||(y[6]=[(0,i.Lk)("div",{class:"loading-spinner"},null,-1)])])),y[13]||(y[13]=(0,i.Lk)("header",{class:"home-header"},[(0,i.Lk)("div",{class:"header-content"},[(0,i.Lk)("h1",{class:"main-title"},"欢迎来到SDM项目管理系统"),(0,i.Lk)("p",{class:"subtitle"},"高效管理您的项目和任务")])],-1)),(0,i.Lk)("main",d,[(0,i.Lk)("section",u,[y[10]||(y[10]=(0,i.Lk)("h2",{class:"section-title"},"快速导航",-1)),(0,i.Lk)("div",c,[(0,i.bF)((0,i.R1)(s.Wk),{to:"/project",class:"nav-item",onMouseenter:y[0]||(y[0]=e=>o(!0,"wbs")),onMouseleave:y[1]||(y[1]=e=>o(!1,"wbs"))},{default:(0,i.k6)(()=>[(0,i.Lk)("div",{class:(0,i.C4)(["nav-icon",{"nav-icon-hover":"wbs"===l.value}])},null,2),y[7]||(y[7]=(0,i.Lk)("span",{class:"nav-text"},"项目",-1))]),_:1}),(0,i.bF)((0,i.R1)(s.Wk),{to:"/table",class:"nav-item",onMouseenter:y[2]||(y[2]=e=>o(!0,"wbs")),onMouseleave:y[3]||(y[3]=e=>o(!1,"wbs"))},{default:(0,i.k6)(()=>[(0,i.Lk)("div",{class:(0,i.C4)(["nav-icon",{"nav-icon-hover":"wbs"===l.value}])},null,2),y[8]||(y[8]=(0,i.Lk)("span",{class:"nav-text"},"数据表页",-1))]),_:1}),(0,i.bF)((0,i.R1)(s.Wk),{to:"/about",class:"nav-item",onMouseenter:y[4]||(y[4]=e=>o(!0,"about")),onMouseleave:y[5]||(y[5]=e=>o(!1,"about"))},{default:(0,i.k6)(()=>[(0,i.Lk)("div",{class:(0,i.C4)(["nav-icon",{"nav-icon-hover":"about"===l.value}])},null,2),y[9]||(y[9]=(0,i.Lk)("span",{class:"nav-text"},"关于我们",-1))]),_:1})])]),(0,i.Lk)("section",v,[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(a,e=>(0,i.Lk)("div",{class:"feature-card fade-in",key:e.id},[(0,i.Lk)("div",p,[(0,i.Lk)("i",{class:(0,i.C4)(e.icon)},null,2)]),(0,i.Lk)("h3",h,(0,i.v_)(e.title),1),(0,i.Lk)("p",g,(0,i.v_)(e.description),1),(0,i.bF)((0,i.R1)(s.Wk),{to:e.link,class:"card-link"},{default:(0,i.k6)(()=>[(0,i.eW)((0,i.v_)(e.buttonText)+" ",1),y[11]||(y[11]=(0,i.Lk)("i",{class:"el-icon-right"},null,-1))]),_:2},1032,["to"])])),64))]),(0,i.Lk)("section",m,[y[12]||(y[12]=(0,i.Lk)("h2",{class:"section-title"},"项目概览",-1)),(0,i.Lk)("div",f,[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(n,e=>(0,i.Lk)("div",{class:"stat-card",key:e.id},[(0,i.Lk)("div",k,(0,i.v_)(e.number),1),(0,i.Lk)("div",b,(0,i.v_)(e.label),1)])),64))])])]),y[14]||(y[14]=(0,i.Lk)("footer",{class:"home-footer"},[(0,i.Lk)("p",null,"\xa9 2025 SDM项目管理系统. 保留所有权利.")],-1))],2))}}),w=(0,n.default)(y,[["__scopeId","data-v-21064c16"]]),L={key:0,class:"loading-overlay"},C={class:"about-main"},R={class:"features-section"},x={class:"features-grid"},E={class:"feature-title"},S={class:"feature-description"},D={class:"tech-stack-section"},F={class:"tech-stack-grid"},_={class:"tech-logo"},M={class:"tech-name"},T={class:"team-section"},X={class:"team-grid"},V={class:"member-name"},H={class:"member-role"},O={class:"back-to-home"},W=(0,i.pM)({__name:"index",setup(e){let t=(0,i.KR)(!1),l=(0,i.KR)(!1),a=[{id:1,title:"WBS任务分解",description:"支持多层级任务分解，清晰展示项目结构和依赖关系",icon:"el-icon-todo-list",color:"#409eff"},{id:2,title:"团队成员协作",description:"实时协作功能，支持任务分配、评论和通知",icon:"el-icon-user",color:"#67c23a"},{id:3,title:"项目进度跟踪",description:"可视化甘特图展示，实时掌握项目进度和里程碑",icon:"el-icon-data-line",color:"#e6a23c"},{id:4,title:"数据可视化",description:"丰富的图表展示，帮助分析项目数据和团队绩效",icon:"el-icon-pie-chart",color:"#f56c6c"}],n=[{id:1,name:"Vue 3",logo:"Vue"},{id:2,name:"TypeScript",logo:"TS"},{id:3,name:"Element Plus",logo:"EP"},{id:4,name:"Vue Router",logo:"Router"},{id:5,name:"VTable",logo:"VT"}],o=[{id:1,name:"张三",role:"产品经理",initials:"张",color:"#409eff"},{id:2,name:"李四",role:"前端开发",initials:"李",color:"#67c23a"},{id:3,name:"王五",role:"后端开发",initials:"王",color:"#e6a23c"}];return(0,i.sV)(()=>{setTimeout(()=>{t.value=!0},500)}),(e,r)=>((0,i.uX)(),(0,i.CE)("div",{class:(0,i.C4)(["about-container",{"about-container-loaded":t.value}])},[t.value?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",L,[...r[2]||(r[2]=[(0,i.Lk)("div",{class:"loading-spinner"},null,-1)])])),r[9]||(r[9]=(0,i.Lk)("header",{class:"about-header"},[(0,i.Lk)("div",{class:"header-content"},[(0,i.Lk)("h1",{class:"page-title"},"关于我们"),(0,i.Lk)("div",{class:"header-divider"})])],-1)),(0,i.Lk)("main",C,[r[6]||(r[6]=(0,i.Fv)('<section class="intro-section" data-v-04a6142c><div class="intro-card fade-in" data-v-04a6142c><div class="card-header" data-v-04a6142c><i class="el-icon-info card-icon" data-v-04a6142c></i><h2 class="card-title" data-v-04a6142c>项目介绍</h2></div><div class="card-content" data-v-04a6142c><p class="intro-text" data-v-04a6142c> 这是一个基于Vue 3的现代化项目管理系统，旨在提供高效的任务管理、团队协作和项目进度跟踪功能。 我们致力于为团队提供直观、易用且功能强大的项目管理解决方案，帮助团队提升工作效率，确保项目按时高质量完成。 </p></div></div></section>',1)),(0,i.Lk)("section",R,[r[3]||(r[3]=(0,i.Lk)("h2",{class:"section-title"},"功能特点",-1)),(0,i.Lk)("div",x,[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(a,e=>(0,i.Lk)("div",{class:"feature-item fade-in",key:e.id},[(0,i.Lk)("div",{class:"feature-icon",style:(0,i.Tr)({backgroundColor:e.color})},[(0,i.Lk)("i",{class:(0,i.C4)(e.icon)},null,2)],4),(0,i.Lk)("h3",E,(0,i.v_)(e.title),1),(0,i.Lk)("p",S,(0,i.v_)(e.description),1)])),64))])]),(0,i.Lk)("section",D,[r[4]||(r[4]=(0,i.Lk)("h2",{class:"section-title"},"技术栈",-1)),(0,i.Lk)("div",F,[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(n,e=>(0,i.Lk)("div",{class:"tech-item fade-in",key:e.id},[(0,i.Lk)("div",_,(0,i.v_)(e.logo),1),(0,i.Lk)("div",M,(0,i.v_)(e.name),1)])),64))])]),(0,i.Lk)("section",T,[r[5]||(r[5]=(0,i.Lk)("h2",{class:"section-title"},"核心团队",-1)),(0,i.Lk)("div",X,[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(o,e=>(0,i.Lk)("div",{class:"team-member fade-in",key:e.id},[(0,i.Lk)("div",{class:"member-avatar",style:(0,i.Tr)({backgroundColor:e.color})},(0,i.v_)(e.initials),5),(0,i.Lk)("h3",V,(0,i.v_)(e.name),1),(0,i.Lk)("p",H,(0,i.v_)(e.role),1)])),64))])])]),(0,i.Lk)("div",O,[(0,i.bF)((0,i.R1)(s.Wk),{to:"/",class:"back-button",onMouseenter:r[0]||(r[0]=e=>l.value=!0),onMouseleave:r[1]||(r[1]=e=>l.value=!1)},{default:(0,i.k6)(()=>[r[7]||(r[7]=(0,i.Lk)("i",{class:"el-icon-left"},null,-1)),r[8]||(r[8]=(0,i.Lk)("span",null,"返回首页",-1)),(0,i.Lk)("div",{class:(0,i.C4)(["button-overlay",{"overlay-active":l.value}])},null,2)]),_:1})]),r[10]||(r[10]=(0,i.Lk)("footer",{class:"about-footer"},[(0,i.Lk)("p",null,"\xa9 2024 项目管理系统. 保留所有权利.")],-1))],2))}}),K=(0,n.default)(W,[["__scopeId","data-v-04a6142c"]]);var j=l(36732),P=l(432),I=l.n(P),B=l(1046),N=l(31104);l(17004);let A={key:0,class:"item"},z={class:"n-t flexs"},Z={class:"flex n-d"},G=(0,i.pM)({__name:"card",props:{element:{type:Object,default:()=>{}}},emits:[""],setup(e,t){let{emit:l}=t,a={Checked:j.y$q,TrendCharts:j.R0w,List:j.B8B,Flag:j.lNU};return console.log("props",e),(t,l)=>e.element&&e.element.title?((0,i.uX)(),(0,i.CE)("div",A,[(0,i.Lk)("div",z,[(0,i.Lk)("h4",null,(0,i.v_)(e.element.title),1),(0,i.Lk)("div",{class:"n-icon flexc",style:(0,i.Tr)({background:e.element.bg+"1a",color:e.element.bg})},[((0,i.uX)(),(0,i.Wv)((0,i.$y)(a[e.element.icon])))],4)]),(0,i.Lk)("h1",null,(0,i.v_)(e.element.num),1),(0,i.Lk)("div",Z,[(0,i.Lk)("p",null,(0,i.v_)(e.element.progress),1),(0,i.Lk)("p",null,(0,i.v_)(e.element.desc),1)])])):(0,i.Q3)("",!0)}}),$=(0,n.default)(G,[["__scopeId","data-v-278b0dda"]]),Q={class:"body"},U={class:"wrap"},J={class:"nums flex"},Y={class:"n-i"},q={class:"n-t flexs"},ee={class:"flex n-d"},et={class:"flexs",style:{"margin-top":"15px"}},el={class:"tb"},ei={class:"item"},ea={class:"flexs",style:{padding:"20px"}},en={class:"flex i-i-d"},eo={class:"flex"},es={class:"flex i-i-d"},er={class:"flex"},ed={class:"flex i-i-d"},eu={class:"flex"},ec={class:"xm tb item"},ev={class:"timeline"},ep={class:"t-i flex"},eh={class:"t-avatar"},eg=["src"],em={class:"t-c"},ef={class:"flexs"},ek={class:"t-name"},eb={class:"t-time"},ey={class:"t-task"},ew={class:"t-task-desc"},eL={ref:"gridRef",class:"grid-stack"},eC=["gs-x","gs-y","gs-w","gs-h"],eR={class:"grid-stack-item-content"},ex=(0,n.default)({__name:"index",setup(e){let t=(0,i.IG)($),a=(0,i.KR)([{title:"项目任务总数",num:2,progress:"0%",desc:"本月新增0个任务",icon:"Checked",bg:"#F17048"},{title:"正常进行",num:0,progress:"0%",desc:"正常进行环比",icon:"TrendCharts",bg:"#409C90"},{title:"预期进行",num:0,progress:"0%",desc:"逾期进行环比",icon:"List",bg:"#E12B32"},{title:"已完成",num:0,progress:"0%",desc:"已完成环比",icon:"Flag",bg:"#1D69E5"}]),n=(0,i.KR)([{id:1,x:0,y:0,w:6,h:3,component:t,props:{title:"趋势图",element:a.value[0]}}]),o={Checked:j.y$q,TrendCharts:j.R0w,List:j.B8B,Flag:j.lNU};(0,i.KR)(null);let s=(0,i.KR)([{avatar:l(1009),name:"rowan",task:"任务1",task_desc:"新增任务文档 名称：1",time:"2025-08-11 11:23:00"},{avatar:l(1009),name:"rowan",task:"重新新开一个项目",task_desc:"导出项目任务项目名称：重新新开一个项目",time:"2025-08-10 08:23:00"},{avatar:l(76346),name:"张三",task:"任务2",task_desc:"导出项目任务项目名称：重新新开一个项目2",time:"2025-08-09 08:23:00"},{avatar:l(1009),name:"李四",task:"写程序",task_desc:"重新创建了项目。出现bug",time:"2025-03-09 08:23:00"}]);(0,i.sV)(()=>{let e,t;new B.Ay$({type:"pie",data:{values:[{type:"未开始",value:30},{type:"已开始",value:70}]},outerRadius:.8,innerRadius:.5,categoryField:"type",valueField:"value",legends:{visible:!0,orient:"right"},labels:{visible:!0,formatter:e=>`${e.type}: ${e.value}`},tooltip:{visible:!0},label:{visible:!0}},{dom:document.getElementById("chart1")}).renderSync(),e=Array.from({length:30},(e,t)=>{let l=new Date;return l.setDate(l.getDate()-(29-t)),l.toISOString().slice(0,10)}),t=[],e.forEach(e=>{t.push({date:e,type:"计划待完成",value:Math.floor(100*Math.random())+50}),t.push({date:e,type:"实际待完成",value:Math.floor(100*Math.random())})}),new B.Ay$({type:"line",data:{values:t},xField:"date",yField:"value",seriesField:"type",point:{visible:!1},line:{style:{lineWidth:2}},legends:{visible:!0},title:{visible:!0,text:"任务燃尽表"},tooltip:{visible:!0},smooth:!0},{dom:document.getElementById("chart2")}).renderSync(),N.dn.init({cellHeight:80,column:12,float:!0,resizable:{handles:"all"},draggable:{handle:".grid-stack-item-content"}},".grid-stack").on("change",function(e,t){console.log("布局变化:",t)})}),(0,i.KR)(!1),(0,i.KR)([{type:"card",data:{title:"项目任务总数",num:2,progress:"0%",desc:"本月新增0个任务",icon:"Checked",bg:"#F17048"}}]);let r=e=>{console.log("nums.value",a.value)};return(e,t)=>{let l=(0,i.g2)("el-scrollbar");return(0,i.uX)(),(0,i.CE)("div",Q,[(0,i.Lk)("div",U,[(0,i.Lk)("div",J,[(0,i.bF)((0,i.R1)(I()),{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),"item-key":"title",draggable:".n-i",onEnd:r},{item:(0,i.k6)(e=>{let{element:t}=e;return[(0,i.Lk)("div",Y,[(0,i.Lk)("div",q,[(0,i.Lk)("h4",null,(0,i.v_)(t.title),1),(0,i.Lk)("div",{class:"n-icon flexc",style:(0,i.Tr)({background:t.bg+"1a",color:t.bg})},[((0,i.uX)(),(0,i.Wv)((0,i.$y)(o[t.icon])))],4)]),(0,i.Lk)("h1",null,(0,i.v_)(t.num),1),(0,i.Lk)("div",ee,[(0,i.Lk)("p",null,(0,i.v_)(t.progress),1),(0,i.Lk)("p",null,(0,i.v_)(t.desc),1)])])]}),_:1},8,["modelValue"])]),(0,i.Lk)("div",et,[(0,i.Lk)("div",el,[(0,i.Lk)("div",ei,[t[8]||(t[8]=(0,i.Lk)("h4",{class:"i-t flexs"},"重新新开一个项目",-1)),(0,i.Lk)("div",ea,[(0,i.Lk)("div",null,[(0,i.Lk)("div",en,[(0,i.Lk)("div",eo,[(0,i.bF)((0,i.R1)(j.M4G)),t[1]||(t[1]=(0,i.eW)(" 项目进度 ",-1))]),t[2]||(t[2]=(0,i.Lk)("p",null,"0%",-1))]),(0,i.Lk)("div",es,[(0,i.Lk)("div",er,[(0,i.bF)((0,i.R1)(j.KJW)),t[3]||(t[3]=(0,i.eW)("项目成员",-1))]),t[4]||(t[4]=(0,i.Lk)("p",null,"1",-1))]),(0,i.Lk)("div",ed,[(0,i.Lk)("div",eu,[(0,i.bF)((0,i.R1)(j.yoT)),t[5]||(t[5]=(0,i.eW)("项目任务总数",-1))]),t[6]||(t[6]=(0,i.Lk)("p",null,"2",-1))])]),t[7]||(t[7]=(0,i.Lk)("div",{class:"t",style:{"border-left":"1px solid #f1f1f1"}},[(0,i.Lk)("div",{id:"chart1",style:{width:"600px",height:"200px"}})],-1))])]),t[9]||(t[9]=(0,i.Lk)("div",{class:"item",style:{"margin-top":"15px"}},[(0,i.Lk)("div",{class:"t"},[(0,i.Lk)("div",{id:"chart2",style:{width:"100%",height:"400px"}})])],-1))]),(0,i.Lk)("div",ec,[t[10]||(t[10]=(0,i.Lk)("h4",{class:"i-t flexs"},"项目动态",-1)),(0,i.Lk)("div",ev,[(0,i.bF)(l,{height:"620px"},{default:(0,i.k6)(()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.value,e=>((0,i.uX)(),(0,i.CE)("div",ep,[(0,i.Lk)("div",eh,[(0,i.Lk)("img",{src:e.avatar,alt:""},null,8,eg)]),(0,i.Lk)("div",em,[(0,i.Lk)("div",ef,[(0,i.Lk)("div",ek,(0,i.v_)(e.name),1),(0,i.Lk)("div",eb,(0,i.v_)(e.time),1)]),(0,i.Lk)("div",ey,(0,i.v_)(e.task),1),(0,i.Lk)("div",ew,(0,i.v_)(e.task_desc),1)])]))),256))]),_:1})])])]),t[11]||(t[11]=(0,i.Lk)("div",null,null,-1))]),(0,i.Lk)("div",eL,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.value,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"grid-stack-item","gs-x":e.x,"gs-y":e.y,"gs-w":e.w,"gs-h":e.h},[(0,i.Lk)("div",eR,[((0,i.uX)(),(0,i.Wv)((0,i.$y)(e.component),(0,i.v6)({ref_for:!0},e.props),null,16))])],8,eC))),128))],512)])}}},[["__scopeId","data-v-2a1e83a0"]]),eE={class:"cl-tabs-container"},eS={class:"tabs-header"},eD={class:"tabs-list"},eF=["onClick","onDragstart","onDrop"],e_={key:0,width:"9",height:"9",xmlns:"http://www.w3.org/2000/svg",class:"left-arc-angle"},eM={class:"tab-content-wrapper"},eT=["innerHTML"],eX=["onClick"],eV={key:1,width:"9",height:"9",xmlns:"http://www.w3.org/2000/svg",class:"right-arc-angle"},eH={key:2,class:"tab-divider"},eO={class:"tab-content"},eW=(0,i.pM)({__name:"CLTabs",props:{modelValue:{type:[String,Number],default:null},items:{type:Array,default:()=>[]},showAddButton:{type:Boolean,default:!0},showActionButtons:{type:Boolean,default:!0},closable:{type:Boolean,default:!0}},emits:["update:modelValue","tab-added","tab-removed","tab-sorted","tab-activated"],setup(e,t){let{emit:l}=t,a=(0,i.KR)([...e.items]),n=(0,i.KR)(e.modelValue||(e.items.length>0?e.items[0].id:null)),o=(0,i.KR)(null);if(a.value.length>0){let e=a.value.find(e=>e.id===n.value);e&&(n.value=e.id)}let s=(0,i.EW)(()=>a.value.find(e=>e.id===n.value));(0,i.wB)(()=>e.items,e=>{a.value=[...e],!n.value&&e.length>0&&(n.value=e[0].id,l("update:modelValue",n.value))}),(0,i.wB)(n,e=>{l("update:modelValue",e),l("tab-activated",e)}),(0,i.wB)(()=>e.modelValue,e=>{void 0!==e&&e!==n.value&&(n.value=e)});let r=e=>{n.value=e},d=()=>{let t=a.value.length>0?Math.max(...a.value.map(e=>"number"==typeof e.id?e.id:0))+1:1,i={id:t,title:`新标签 ${t}`,content:`这是新标签 ${t} 的内容`,closable:e.closable??!0};a.value.push(i),r(t),l("tab-added",i)};return(t,u)=>((0,i.uX)(),(0,i.CE)("div",eE,[(0,i.Lk)("div",eS,[(0,i.Lk)("div",eD,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.value,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:(0,i.C4)(["tab-item",{active:n.value===e.id}]),onClick:t=>r(e.id),draggable:"true",onDragstart:t=>{o.value=e,t.dataTransfer&&(t.dataTransfer.effectAllowed="move")},onDragover:u[0]||(u[0]=e=>{e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move")}),onDrop:t=>((e,t)=>{if(e.preventDefault(),o.value&&o.value.id!==t.id){let e=a.value.findIndex(e=>{var t;return e.id===(null==o||null==(t=o.value)?void 0:t.id)}),i=a.value.findIndex(e=>e.id===t.id);if(-1!==e&&-1!==i){let t=[...a.value];(null==o?void 0:o.value)&&(t.splice(e,1),t.splice(i,0,o.value)),a.value=t,l("tab-sorted",t)}}})(t,e),onDragend:u[1]||(u[1]=e=>{o.value=null})},[n.value===e.id?((0,i.uX)(),(0,i.CE)("svg",e_,[...u[2]||(u[2]=[(0,i.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 0v9h9a9 9 0 01-9-9z"},null,-1)])])):(0,i.Q3)("",!0),(0,i.Lk)("div",eM,[(0,i.Lk)("div",{class:"tab-icon",innerHTML:e.icon},null,8,eT),(0,i.Lk)("div",null,(0,i.v_)(e.title),1),e.closable?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"tab-close",onClick:t=>((e,t)=>{t&&t.stopPropagation();let i=a.value.findIndex(t=>t.id===e);if(-1!==i){let t=a.value[i];a.value.splice(i,1),n.value===e&&a.value.length>0&&r(i>0?a.value[i-1].id:a.value[0].id),l("tab-removed",t)}})(e.id,t)}," \xd7 ",8,eX)):(0,i.Q3)("",!0)]),n.value===e.id?((0,i.uX)(),(0,i.CE)("svg",eV,[...u[3]||(u[3]=[(0,i.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 0v9h9a9 9 0 01-9-9z"},null,-1)])])):(0,i.Q3)("",!0),n.value!==e.id?((0,i.uX)(),(0,i.CE)("div",eH)):(0,i.Q3)("",!0)],42,eF))),128))]),e.showAddButton?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"add-tab-btn",onClick:d},"+")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",eO,[(0,i.RG)(t.$slots,"content",{activeTab:s.value},()=>{var e;return[(0,i.eW)((0,i.v_)(null==(e=s.value)?void 0:e.content),1)]})])]))}}),eK=(0,n.default)(eW,[["__scopeId","data-v-16a04f72"]]);var ej=l(66666),eP=l(72067);let eI='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="MaybeOutlined"><path d="M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm0 2C5.925 23 1 18.075 1 12S5.925 1 12 1s11 4.925 11 11-4.925 11-11 11Zm-1-6a1 1 0 1 1 2 0 1 1 0 0 1-2 0ZM8.05 9.282a5.17 5.17 0 0 1 .039-.28c.195-1.085.689-1.883 1.481-2.394.62-.405 1.383-.608 2.288-.608 1.189 0 2.176.288 2.962.864.787.575 1.18 1.428 1.18 2.558 0 .693-.17 1.277-.513 1.752-.2.287-.584.655-1.152 1.103l-.56.44c-.305.24-.507.52-.607.84a2.742 2.742 0 0 0-.072.486.5.5 0 0 1-.498.457h-1.12a.5.5 0 0 1-.498-.546c.065-.696.134-1.136.207-1.321.137-.344.49-.74 1.058-1.188l.575-.455c.19-.144 1.166-.831 1.166-1.44 0-.608-.106-.832-.412-1.166-.305-.333-.993-.44-1.613-.44-.61 0-1.132.161-1.387.572-.118.19-.215.393-.284.6a2.097 2.097 0 0 0-.073.307.5.5 0 0 1-.493.415H8.547a.5.5 0 0 1-.497-.556Z" fill="currentColor"></path></svg>',eB='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="CalendarLineOutlined"><path d="M7 2a1 1 0 0 1 1 1h8a1 1 0 1 1 2 0h2a2 2 0 0 1 2 2v15a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h2a1 1 0 0 1 1-1Zm9 3H8a1 1 0 0 1-2 0H4v15h16V5h-2a1 1 0 1 1-2 0ZM9 15a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1h1a1 1 0 0 0 1-1v-1Zm1.5-5a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1v-1Zm3 5a1 1 0 0 0-1-1h-1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1h1a1 1 0 0 0 1-1v-1Zm1.5 0a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1v-1Zm3-5a1 1 0 0 0-1-1h-1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1h1a1 1 0 0 0 1-1v-1Z" fill="currentColor"></path></svg>',eN='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="BitablegridOutlined"><path d="M2 4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4Zm7.5 0v4H20V4H9.5Zm0 6v4H20v-4H9.5Zm-2 4v-4H4v4h3.5ZM4 16v4h3.5v-4H4Zm5.5 0v4H20v-4H9.5Zm-2-12H4v4h3.5V4Z" fill="currentColor"></path></svg>',eA='<svg data-v-1dafdc70="" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><path fill="currentColor" d="M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224"></path></svg>',ez='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="DragOutlined"><path d="M8.25 6.5a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Zm0 7.25a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Zm1.75 5.5a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0ZM14.753 6.5a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5ZM16.5 12a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0Zm-1.747 9a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Z" fill="currentColor"></path></svg>',eZ=`<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
  <line x1="50" y1="20" x2="50" y2="80" stroke="#999" stroke-width="8" stroke-linecap="round"/>
  <line x1="20" y1="50" x2="80" y2="50" stroke="#999" stroke-width="8" stroke-linecap="round"/>
</svg>`,eG=`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <circle cx="12" cy="12" r="3" stroke="#999" stroke-width="2"/>
  <path d="M1 12C1 12 5 4 12 4C19 4 23 12 23 12" stroke="#999" stroke-width="2" stroke-linecap="round"/>
  <path d="M1 12C1 12 5 20 12 20C19 20 23 12 23 12" stroke="#999" stroke-width="2" stroke-linecap="round"/>
</svg>`,e$=e=>{switch(e){case"user":return'<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="MemberOutlined"><path d="M15 6.5a3 3 0 1 0-6 0 3 3 0 0 0 6 0Zm2 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0ZM4 19v2h16v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4Zm-2 0a6 6 0 0 1 6-6h8a6 6 0 0 1 6 6v2a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-2Z" fill="currentColor"></path></svg>';case"date":return eB;case"fn":return'<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="BaseFormulaOutlined"><path d="M12.5 1A4.5 4.5 0 0 0 8 5.5V10H4a1 1 0 1 0 0 2h4v6.5a2.5 2.5 0 0 1-5 0V18a1 1 0 1 0-2 0v.5a4.5 4.5 0 1 0 9 0V12h4a1 1 0 1 0 0-2h-4V5.5a2.5 2.5 0 0 1 5 0V6a1 1 0 1 0 2 0v-.5A4.5 4.5 0 0 0 12.5 1Zm8.884 19.879a1 1 0 0 1 1.074 1.68l-.142.108a1.667 1.667 0 0 1-2.316-.31l-1.57-1.95-1.572 1.95a1.667 1.667 0 0 1-2.315.31l-.143-.107a1 1 0 0 1 1.074-1.681l1.668-2.07-1.668-2.072a1 1 0 0 1-1.074-1.68l.143-.107a1.667 1.667 0 0 1 2.315.31l1.571 1.95L20 15.26a1.667 1.667 0 0 1 2.316-.31l.142.107a1 1 0 0 1-1.074 1.68l-1.668 2.071 1.668 2.07Z" fill="currentColor"></path></svg>';case"multiple":return'<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="GroupSelectionOutlined"><path d="M6.707 3.707a1 1 0 0 0-1.414-1.414L3 4.586l-.793-.793A1 1 0 0 0 .793 5.207l1.5 1.5a1 1 0 0 0 1.414 0l3-3ZM10 3a1 1 0 0 0 0 2h12a1 1 0 1 0 0-2H10Zm0 8a1 1 0 1 0 0 2h12a1 1 0 1 0 0-2H10Zm0 8a1 1 0 1 0 0 2h12a1 1 0 1 0 0-2H10Zm-3.293-.293a1 1 0 1 0-1.414-1.414L3 19.586l-.793-.793a1 1 0 0 0-1.414 1.414l1.5 1.5a1 1 0 0 0 1.414 0l3-3Zm0-8.914a1 1 0 0 1 0 1.414l-3 3a1 1 0 0 1-1.414 0l-1.5-1.5a1 1 0 1 1 1.414-1.414l.793.793 2.293-2.293a1 1 0 0 1 1.414 0Z" fill="currentColor"></path></svg>';case"radio":return'<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="DownRoundOutlined"><path d="M7.755 11.658a1 1 0 0 1 1.416-1.415L12 13.07l2.828-2.829a1 1 0 0 1 1.416 1.416c-1.181 1.189-2.356 2.386-3.553 3.56a.987.987 0 0 1-1.383 0c-1.196-1.175-2.371-2.371-3.553-3.56Z" fill="currentColor"></path><path d="M12 23C5.925 23 1 18.075 1 12S5.925 1 12 1s11 4.925 11 11-4.925 11-11 11Zm0-2a9 9 0 1 0 0-18 9 9 0 0 0 0 18Z" fill="currentColor"></path></svg>';case"checkbox":return'<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="TodoOutlined"><path d="M17.207 10.207a1 1 0 0 0-1.414-1.414L11 13.586l-2.293-2.293a1 1 0 0 0-1.414 1.414l3 3a1 1 0 0 0 1.414 0l5.5-5.5Z" fill="currentColor"></path><path d="M2 4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4Zm2 0v16h16V4H4Z" fill="currentColor"></path></svg>';case"file":return'<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="AttachmentOutlined"><path d="M12.304 7.315a1 1 0 0 1 1.414 1.414L8.13 14.317a1.485 1.485 0 0 0 0 2.1l.01.011a1.5 1.5 0 0 0 2.117-.005l7.43-7.43a3.5 3.5 0 0 0 0-4.95l-.036-.037a3.5 3.5 0 0 0-4.95 0l-7.778 7.777a5.521 5.521 0 0 0 7.808 7.809l7.07-7.07a1 1 0 0 1 1.415 1.414l-7.07 7.07A7.521 7.521 0 0 1 3.509 10.37l7.778-7.778a5.5 5.5 0 0 1 7.778 0l.037.037a5.5 5.5 0 0 1 0 7.778l-7.43 7.43a3.5 3.5 0 0 1-4.939.012l-.006-.006-.012-.012a3.485 3.485 0 0 1 0-4.928l5.589-5.588Z" fill="currentColor"></path></svg>';default:return'<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="StyleOutlined"><path d="M8.437 4.898 5.447 13h6.063L8.437 4.898Zm6.025 15.881L12.269 15h-7.56l-2.131 5.78a1 1 0 1 1-1.873-.703L7.02 2.982c.491-1.31 2.344-1.31 2.835 0l6.48 17.095a1 1 0 1 1-1.872.702ZM15.056 5a1 1 0 1 0 0 2H23a1 1 0 1 0 0-2h-7.944Zm1.055 7a1 1 0 0 1 1-1H23a1 1 0 1 1 0 2h-5.89a1 1 0 0 1-1-1Zm3.056 5a1 1 0 1 0 0 2H23a1 1 0 1 0 0-2h-3.833Z" fill="currentColor"></path></svg>'}},eQ={P0:"#ff4d4f",P1:"#fa8c16",P2:"#1890ff",P3:"#52c41a",P4:"pink",P5:"orange"},eU={已完成:"#52c41a",进行中:"#1890ff",未开始:"#8c8c8c"},eJ={胡小蝶:"\uD83D\uDD35",陈小美:"\uD83D\uDFE2",林小智:"\uD83D\uDFE0",王小哈:"\uD83D\uDFE3",张三:"\uD83D\uDD34",李四:"\uD83D\uDFE1",王五:"\uD83D\uDFE4",赵六:"\uD83D\uDD37",钱七:"\uD83D\uDD38",孙八:"\uD83D\uDFEA",周九:"\uD83D\uDFE8",吴十:"\uD83D\uDFE7"},eY=[{value:"已完成",label:"已完成",tag:"已完成"},{value:"进行中",label:"进行中",tag:"进行中"},{value:"未开始",label:"未开始",tag:"未开始"}],eq=[{value:"P0",label:"P0",tag:"P0"},{value:"P1",label:"P1",tag:"P1"},{value:"P2",label:"P2",tag:"P2"},{value:"P3",label:"P3",tag:"P3"},{value:"P4",label:"P4",tag:"P4"},{value:"P5",label:"P5",tag:"P5"}],e0=[{value:"task",label:"任务",tag:"任务"},{value:"bug",label:"Bug",tag:"Bug"},{value:"feature",label:"功能",tag:"功能"},{value:"design",label:"设计",tag:"设计"},{value:"document",label:"文档",tag:"文档"},{value:"test",label:"测试",tag:"测试"},{value:"other",label:"其他",tag:"其他"}],e1=[{id:"1",no:"1",name:"双子座68.80KW-机体项目",priority:["P0"],status:"进行中",startDate:"2025-09-13",endDate:"2025-09-14",assignee:"Rowan",parentRecord:"",progress:100,remark:"地震仿真项目",applicationTitle:"来自仿真1",taskNumber:"S25-XXXX",projectNumber:"01-2-02-02-03-25-108",simulationSubject:"力学仿真",projectManager:"孙永平",projectDescription:"地震仿真项目，用于测试机体结构强度",geometricModelVersion:"V1.0",simulationExecutor:"Rowan",resultJudgment:"-",riskLevel:"高",approachingSolutions:2,optimizationOpinions:"蓝底充克",proposer:"Rowan",demandDepartment:"蓝底充克",firstExecutor:"Rowan",secondExecutor:"Rowan",receiveDate:"2024-12-11",projectDuration:30,taskStatus:"ON GOING",trend:"http://debug7.ai",hasOptimalResult:!0,isEnded:!1,children:[{id:"1-1",no:"1.1",name:"双子座-机体项目",parent:0,priority:["P0"],status:"进行中",startDate:"2025-09-14",endDate:"2025-09-18",assignee:"Rowan",parentRecord:"双子座68.80KW-机体项目",progress:70,applicationTitle:"申请单的标题",taskNumber:"S25-XXXX",projectNumber:"01-2-02-02-03-25-108",simulationSubject:"力学仿真",projectManager:"孙永平",projectDescription:"地震仿真项目，用于测试机体结构强度",geometricModelVersion:"V1.0",simulationExecutor:"Rowan",resultJudgment:"-",riskLevel:"高",approachingSolutions:2,optimizationOpinions:"蓝底充克",proposer:"Rowan",demandDepartment:"蓝底充克",firstExecutor:"Rowan",secondExecutor:"Rowan",receiveDate:"2025-09-10",projectDuration:30,taskStatus:"ON GOING",trend:"http://debug7.ai",hasOptimalResult:!0,isEnded:!0,remainingDays:199,children:[{id:"1-1-1",no:"1.1.1",parent:0,name:"双子项目",priority:["P0"],status:"进行中",startDate:"2025-09-19",endDate:"2025-09-21",assignee:"Rowan",parentRecord:"双子座68.80KW-机体项目",progress:60,applicationTitle:"来自仿真申请单的标题",taskNumber:"S25-XXXX",projectNumber:"01-2-02-02-03-25-108",simulationSubject:"力学仿真",projectManager:"孙永平",projectDescription:"地震仿真项目，用于测试机体结构强度",geometricModelVersion:"V1.0",simulationExecutor:"Rowan",resultJudgment:"-",riskLevel:"高",approachingSolutions:2,optimizationOpinions:"蓝底充克",proposer:"Rowan",demandDepartment:"蓝底充克",firstExecutor:"Rowan",secondExecutor:"Rowan",receiveDate:"2025-09-11",projectDuration:30,taskStatus:"ON GOING",trend:"http://debug7.ai",hasOptimalResult:!0,isEnded:!0}]},{id:"1-2",no:"1.2",parent:0,name:"双子座68.80KW-机体项目",priority:["P0"],status:"进行中",startDate:"2025-09-12",endDate:"2025-09-15",assignee:"Rowan",parentRecord:"双子座68.80KW-机体项目",progress:60,applicationTitle:"来自仿真申请单的标题",taskNumber:"S25-XXXX",projectNumber:"01-2-02-02-03-25-108",simulationSubject:"力学仿真",projectManager:"孙永平",projectDescription:"地震仿真项目，用于测试机体结构强度",geometricModelVersion:"V1.0",simulationExecutor:"Rowan",resultJudgment:"-",riskLevel:"高",approachingSolutions:2,optimizationOpinions:"蓝底充克",proposer:"Rowan",demandDepartment:"蓝底充克",firstExecutor:"Rowan",secondExecutor:"Rowan",receiveDate:"2025-09-11",projectDuration:30,taskStatus:"ON GOING",trend:"http://debug7.ai",hasOptimalResult:!0,isEnded:!0},{id:"1-3",no:"1.3",parent:0,name:"双子座68.80KW",priority:["P0"],status:"进行中",startDate:"2025-09-16",endDate:"2025-09-18",assignee:"Rowan",parentRecord:"双子座68.80KW-机体项目",progress:60,applicationTitle:"来自仿真申请单的标题",taskNumber:"S25-XXXX",projectNumber:"01-2-02-02-03-25-108",simulationSubject:"力学仿真",projectManager:"孙永平",projectDescription:"地震仿真项目，用于测试机体结构强度",geometricModelVersion:"V1.0",simulationExecutor:"Rowan",resultJudgment:"-",riskLevel:"高",approachingSolutions:2,optimizationOpinions:"蓝底充克",proposer:"Rowan",demandDepartment:"蓝底充克",firstExecutor:"Rowan",secondExecutor:"Rowan",receiveDate:"2025-09-11",projectDuration:30,taskStatus:"ON GOING",trend:"http://debug7.ai",hasOptimalResult:!0,isEnded:!0}]},{id:"2",no:"2",parent:0,name:"68.80KW-机体项目",priority:["P0"],status:"进行中",startDate:"2025-09-16",endDate:"2025-09-20",assignee:"Calvin",parentRecord:"",progress:55,remark:"地震仿真项目",applicationTitle:"来自仿真申请单的标题",taskNumber:"S25-XXXX",projectNumber:"01-2-02-02-03-25-108",simulationSubject:"力学仿真",projectManager:"孙永平",projectDescription:"地震仿真项目，用于测试机体结构强度",geometricModelVersion:"V1.0",simulationExecutor:"Calvin",resultJudgment:"-",riskLevel:"高",approachingSolutions:2,optimizationOpinions:"蓝底充克",proposer:"Calvin",demandDepartment:"蓝底充克",firstExecutor:"Calvin",secondExecutor:"Calvin",receiveDate:"2025-09-11",projectDuration:30,taskStatus:"ON GOING",trend:"http://debug7.ai",hasOptimalResult:!0,isEnded:!0,children:[{id:"2-1",no:"2.1",name:"双子座-机体项目",parent:0,priority:["P0"],status:"进行中",startDate:"2025-09-18",endDate:"2025-09-23",assignee:"Rowan",parentRecord:"双子座68.80KW-机体项目",progress:70,applicationTitle:"申请单的标题",taskNumber:"S25-XXXX",projectNumber:"01-2-02-02-03-25-108",simulationSubject:"力学仿真",projectManager:"孙永平",projectDescription:"地震仿真项目，用于测试机体结构强度",geometricModelVersion:"V1.0",simulationExecutor:"Rowan",resultJudgment:"-",riskLevel:"高",approachingSolutions:2,optimizationOpinions:"蓝底充克",proposer:"Rowan",demandDepartment:"蓝底充克",firstExecutor:"Rowan",secondExecutor:"Rowan",receiveDate:"2025-09-10",projectDuration:30,taskStatus:"ON GOING",trend:"http://debug7.ai",hasOptimalResult:!0,isEnded:!0,remainingDays:199,children:[{id:"2-1-1",no:"2.1.1",parent:0,name:"双子项目",priority:["P0"],status:"进行中",startDate:"2025-09-09",endDate:"2025-09-13",assignee:"Rowan",parentRecord:"双子座68.80KW-机体项目",progress:60,applicationTitle:"来自仿真申请单的标题",taskNumber:"S25-XXXX",projectNumber:"01-2-02-02-03-25-108",simulationSubject:"力学仿真",projectManager:"孙永平",projectDescription:"地震仿真项目，用于测试机体结构强度",geometricModelVersion:"V1.0",simulationExecutor:"Rowan",resultJudgment:"-",riskLevel:"高",approachingSolutions:2,optimizationOpinions:"蓝底充克",proposer:"Rowan",demandDepartment:"蓝底充克",firstExecutor:"Rowan",secondExecutor:"Rowan",receiveDate:"2025-09-11",projectDuration:30,taskStatus:"ON GOING",trend:"http://debug7.ai",hasOptimalResult:!0,isEnded:!0}]},{id:"2-2",no:"2.2",parent:0,name:"双子座68.80KW-机体项目",priority:["P0"],status:"进行中",startDate:"2025-09-06",endDate:"2025-09-12",assignee:"Rowan",parentRecord:"双子座68.80KW-机体项目",progress:60,applicationTitle:"来自仿真申请单的标题",taskNumber:"S25-XXXX",projectNumber:"01-2-02-02-03-25-108",simulationSubject:"力学仿真",projectManager:"孙永平",projectDescription:"地震仿真项目，用于测试机体结构强度",geometricModelVersion:"V1.0",simulationExecutor:"Rowan",resultJudgment:"-",riskLevel:"高",approachingSolutions:2,optimizationOpinions:"蓝底充克",proposer:"Rowan",demandDepartment:"蓝底充克",firstExecutor:"Rowan",secondExecutor:"Rowan",receiveDate:"2025-09-11",projectDuration:30,taskStatus:"ON GOING",trend:"http://debug7.ai",hasOptimalResult:!0,isEnded:!0},{id:"2-3",no:"2.3",parent:0,name:"双子座68.80KW",priority:["P0"],status:"进行中",startDate:"2025-09-13",endDate:"2025-09-16",assignee:"Rowan",parentRecord:"双子座68.80KW-机体项目",progress:60,applicationTitle:"来自仿真申请单的标题",taskNumber:"S25-XXXX",projectNumber:"01-2-02-02-03-25-108",simulationSubject:"力学仿真",projectManager:"孙永平",projectDescription:"地震仿真项目，用于测试机体结构强度",geometricModelVersion:"V1.0",simulationExecutor:"Rowan",resultJudgment:"-",riskLevel:"高",approachingSolutions:2,optimizationOpinions:"蓝底充克",proposer:"Rowan",demandDepartment:"蓝底充克",firstExecutor:"Rowan",secondExecutor:"Rowan",receiveDate:"2025-09-11",projectDuration:30,taskStatus:"ON GOING",trend:"http://debug7.ai",hasOptimalResult:!0,isEnded:!0}]},{id:"3",no:"3",parent:0,name:"机体项目",type:"milestone",priority:["P0"],status:"进行中",startDate:"2025-09-11",endDate:"2025-09-14",assignee:"张三",parentRecord:"",progress:52,remark:"地震仿真项目",applicationTitle:"申请单的标题",taskNumber:"S25-XXXX",projectNumber:"01-2-02-02-03-25-108",simulationSubject:"力学仿真",projectManager:"孙永平",projectDescription:"地震仿真项目，用于测试机体结构强度",geometricModelVersion:"V1.0",simulationExecutor:"Rowan",resultJudgment:"-",riskLevel:"高",approachingSolutions:2,optimizationOpinions:"蓝底充克",proposer:"Rowan",demandDepartment:"蓝底充克",firstExecutor:"张三",secondExecutor:"张三",receiveDate:"2025-09-11",projectDuration:30,taskStatus:"ON GOING",trend:"http://debug7.ai",hasOptimalResult:!0,isEnded:!0},{id:"4",no:"4",name:"双子座68.80KW-机体项目",type:"project",parent:0,priority:["P0"],status:"进行中",startDate:"2025-09-11",endDate:"2025-09-14",assignee:"李四翼",parentRecord:"",progress:48,remark:"地震仿真项目",applicationTitle:"标题1",taskNumber:"S25-XXXX",projectNumber:"01-2-02-02-03-25-108",simulationSubject:"力学仿真",projectManager:"孙永平",projectDescription:"地震仿真项目，用于测试机体结构强度",geometricModelVersion:"V1.0",simulationExecutor:"Rowan",resultJudgment:"-",riskLevel:"高",approachingSolutions:2,optimizationOpinions:"蓝底充克",proposer:"Rowan",demandDepartment:"蓝底充克",firstExecutor:"李四翼",secondExecutor:"李四翼",receiveDate:"2025-09-11",projectDuration:30,taskStatus:"ON GOING",trend:"http://debug7.ai",hasOptimalResult:!0,isEnded:!0},{id:"5",no:"5",parent:0,name:"双子座68.80KW-机体项目",type:"task",priority:["P0"],status:"进行中",startDate:"2025-09-11",endDate:"2025-09-14",assignee:"Rowan",parentRecord:"",progress:45,remark:"地震仿真项目",applicationTitle:"来自仿真申请单的标题",taskNumber:"S25-XXXX",projectNumber:"01-2-02-02-03-25-108",simulationSubject:"力学仿真",projectManager:"孙永平",projectDescription:"地震仿真项目，用于测试机体结构强度",geometricModelVersion:"V1.0",simulationExecutor:"Rowan",resultJudgment:"-",riskLevel:"高",approachingSolutions:2,optimizationOpinions:"蓝底充克",proposer:"Rowan",demandDepartment:"蓝底充克",firstExecutor:"Rowan",secondExecutor:"Rowan",receiveDate:"2025-09-11",projectDuration:30,taskStatus:"ON GOING",trend:"http://debug7.ai",hasOptimalResult:!0,isEnded:!0},{id:"6",no:"6",parent:0,name:"双子座68.80KW-机体项目",type:"task",priority:["P0"],status:"进行中",startDate:"2025-09-11",endDate:"2025-09-14",assignee:"Rowan",parentRecord:"",progress:42,remark:"地震仿真项目",applicationTitle:"来自仿真申请单的标题",taskNumber:"S25-XXXX",projectNumber:"01-2-02-02-03-25-108",simulationSubject:"力学仿真",projectManager:"孙永平",projectDescription:"地震仿真项目，用于测试机体结构强度",geometricModelVersion:"V1.0",simulationExecutor:"Rowan",resultJudgment:"-",riskLevel:"高",approachingSolutions:2,optimizationOpinions:"蓝底充克",proposer:"Rowan",demandDepartment:"蓝底充克",firstExecutor:"Rowan",secondExecutor:"Rowan",receiveDate:"2025-09-11",projectDuration:30,taskStatus:"ON GOING",trend:"http://debug7.ai",hasOptimalResult:!0,isEnded:!0},{id:"7",no:"7",parent:0,name:"双子座68.80KW-机体项目",type:"task",priority:["P0"],status:"进行中",startDate:"2025-09-11",endDate:"2025-09-24",assignee:"Rowan",parentRecord:"",progress:40,remark:"地震仿真项目",applicationTitle:"来自仿真申请单的标题",taskNumber:"S25-XXXX",projectNumber:"01-2-02-02-03-25-108",simulationSubject:"力学仿真",projectManager:"孙永平",projectDescription:"地震仿真项目，用于测试机体结构强度",geometricModelVersion:"V1.0",simulationExecutor:"Rowan",resultJudgment:"-",riskLevel:"高",approachingSolutions:2,optimizationOpinions:"蓝底充克",proposer:"Rowan",demandDepartment:"蓝底充克",firstExecutor:"Rowan",secondExecutor:"Rowan",receiveDate:"2025-09-11",projectDuration:30,taskStatus:"ON GOING",trend:"http://debug7.ai",hasOptimalResult:!0,isEnded:!0},{id:"8",no:"8",name:"双子座68.80KW-机体项目",type:"task",priority:["P0"],status:"进行中",startDate:"2025-09-11",endDate:"2025-09-14",assignee:"Rowan",parentRecord:"",progress:40,remark:"地震仿真项目",applicationTitle:"来自仿真申请单的标题",taskNumber:"S25-XXXX",projectNumber:"01-2-02-02-03-25-108",simulationSubject:"力学仿真",projectManager:"孙永平",projectDescription:"地震仿真项目，用于测试机体结构强度",geometricModelVersion:"V1.0",simulationExecutor:"Rowan",resultJudgment:"-",riskLevel:"高",approachingSolutions:2,optimizationOpinions:"蓝底充克",proposer:"Rowan",demandDepartment:"蓝底充克",firstExecutor:"Rowan",secondExecutor:"Rowan",receiveDate:"2025-09-11",projectDuration:30,taskStatus:"ON GOING",trend:"http://debug7.ai",hasOptimalResult:!0,isEnded:!0}];new URL(l(99678),l.b).href,new URL(l(99678),l.b).href,new URL(l(99678),l.b).href,new URL(l(99678),l.b).href,new URL(l(99678),l.b).href,new URL(l(99678),l.b).href,new URL(l(99678),l.b).href,new URL(l(99678),l.b).href;let e2={class:"dialog-scrollable"},e4={class:"dialog-content"},e5={class:"form-item"},e3={class:"form-item"},e8={class:"field-type-selector"},e6=["innerHTML"],e9={class:"type-text"},e7={class:"arrow"},te=["onMouseenter","onClick"],tt={class:"type-icon"},tl=["innerHTML"],ti={class:"type-text"},ta={key:0,class:"form-item border-t"},tn={class:"options-container"},to={key:0,class:"options-list"},ts=["onDragstart","onDragenter","onDrop"],tr={class:"option-content"},td=["innerHTML"],tu={class:"option-edit"},tc=["onUpdate:modelValue"],tv={class:"option-actions"},tp=["onClick"],th=(0,i.pM)({__name:"FieldEditDialog",props:{visible:{type:Boolean},field:{},position:{}},emits:["close","confirm"],setup(e,t){let{emit:l}=t,a=(0,i.KR)({title:"",expectedDate:"",fieldType:"text",fieldPath:"",options:[]}),n=(0,i.KR)([{value:"text",name:"文本"},{value:"textarea",name:"文本域"},{value:"radio",name:"单选"},{value:"multiple",name:"多选"},{value:"checkbox",name:"复选框"},{value:"file",name:"附件"},{value:"date",name:"日期"},{value:"user",name:"人员"},{value:"fn",name:"公式"}]),o=(0,i.KR)(!1),s=(0,i.KR)(""),r=(0,i.KR)(null),d=(0,i.KR)(null),u=(0,i.KR)({left:280,top:0}),c=(0,i.KR)(void 0),v=()=>{(0,i.dY)(()=>{if(!e.position)return;let{left:t,top:l}=e.position,i=window.innerHeight,a=window.innerWidth,n=document.querySelector(".field-edit-dialog");if(!n)return;let o=n.getBoundingClientRect(),s=t;t+o.width>a&&(s=Math.max(0,a-o.width-10)),c.value={left:s,top:l+o.height>i?Math.max(80,i-o.height-10):Math.max(80,l)}})};(0,i.wB)(()=>e.visible,e=>{e&&v()}),window.addEventListener("resize",v),(0,i.wB)(o,e=>{e&&(0,i.dY)(()=>{if(r.value){let e=r.value,t=e.parentElement,l=(null==t?void 0:t.getBoundingClientRect())||{right:0,top:0,bottom:0},i=e.getBoundingClientRect()||{width:0,height:0},a=window.innerWidth,n=window.innerHeight;"number"==typeof l.right&&"number"==typeof i.width&&l.right+i.width>a?u.value.left=-i.width-8:u.value.left=l.width+10,"number"==typeof l.top&&"number"==typeof i.height&&l.top+i.height>n?u.value.top=-24+Math.max(0,n-i.height-("number"==typeof l.top?l.top:0)):u.value.top=0}})}),(0,i.wB)(()=>e.field,e=>{e&&(a.value={title:e.name||"",expectedDate:"",fieldType:e.type||"text",fieldPath:e.field||"",options:[]},p(e.field))},{immediate:!0}),(0,i.wB)(()=>a.value.fieldType,()=>{p(a.value.fieldPath)});let p=e=>{if("radio"!==a.value.fieldType&&"multiple"!==a.value.fieldType||!e){a.value.options=[];return}switch(a.value.options=[],e){case"priority":Object.keys(eQ).forEach(e=>{a.value.options.push({id:Date.now().toString()+e,value:e})});break;case"status":Object.keys(eU).forEach(e=>{a.value.options.push({id:Date.now().toString()+e,value:e})});break;case"assignee":Object.keys(eJ).forEach(e=>{a.value.options.push({id:Date.now().toString()+e,value:e})})}},h=()=>{let e={id:Date.now().toString(),value:""};a.value.options.push(e),(0,i.dY)(()=>{let e=document.querySelectorAll(".option-edit input");e.length>0&&(e[e.length-1].focus(),v())})},g=()=>{document.querySelectorAll(".option-item.drag-over").forEach(e=>e.classList.remove("drag-over"))},m=(0,i.EW)(()=>"radio"===a.value.fieldType||"multiple"===a.value.fieldType),f=()=>{o.value=!0},k=()=>{o.value=!1},b=e=>{e.stopPropagation(),l("close")},y=e=>{e.stopPropagation(),l("confirm",{...a.value,options:m.value?a.value.options:void 0})},w=()=>{c.value&&(c.value={...c.value})},L=(0,i.KR)({left:0,top:0}),C=(0,i.KR)(300),R=()=>{o.value=!o.value,o.value&&(x(),v())},x=()=>{(0,i.dY)(()=>{let e=document.querySelector(".selected-type"),t=r.value;if(!e||!t)return;let l=e.getBoundingClientRect(),i=window.innerWidth,a=window.innerHeight,n=l.right+4,o=l.top;n+t.offsetWidth>i&&(n=l.left-t.offsetWidth-4);let s=a-l.top;L.value={left:n,top:o},C.value=s>100?s:100})},E=()=>{o.value&&x()};return(0,i.sV)(()=>{window.addEventListener("resize",w),window.addEventListener("resize",E)}),(0,i.hi)(()=>{window.removeEventListener("resize",w),window.removeEventListener("resize",E)}),(t,l)=>{var u;let p,w=(0,i.g2)("el-icon");return t.visible?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,i.C4)(["field-edit-dialog-overlay",{positioned:e.position}])},[(0,i.Lk)("div",{class:(0,i.C4)(["field-edit-dialog",{positioned:c.value}]),style:(0,i.Tr)(c.value?{left:c.value.left+7+"px",top:c.value.top+"px"}:{})},[(0,i.Lk)("div",e2,[(0,i.Lk)("div",e4,[(0,i.Lk)("div",e5,[l[3]||(l[3]=(0,i.Lk)("label",{for:"field-title"},"标题",-1)),(0,i.bo)((0,i.Lk)("input",{id:"field-title","onUpdate:modelValue":l[0]||(l[0]=e=>a.value.title=e),type:"text",placeholder:"请输入字段标题"},null,512),[[i.Jo,a.value.title]])]),(0,i.Lk)("div",e3,[l[4]||(l[4]=(0,i.Lk)("label",{for:"field-type"},"字段类型",-1)),(0,i.Lk)("div",e8,[(0,i.Lk)("div",{class:"selected-type",onClick:R},[(0,i.Lk)("div",{class:"type-icon",innerHTML:(0,i.R1)(e$)(a.value.fieldType)},null,8,e6),(0,i.Lk)("div",e9,(0,i.v_)((u=a.value.fieldType,(p=n.value.find(e=>e.value===u))?p.name:"文本")),1),(0,i.Lk)("div",e7,[(0,i.bF)(w,null,{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.Qpb))]),_:1})])]),o.value?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"type-options-panel",ref_key:"typeOptionsRef",ref:r,style:(0,i.Tr)({left:L.value.left+"px",top:L.value.top+"px",maxHeight:C.value+"px",overflowY:"auto"}),onMouseenter:f,onMouseleave:k},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.value,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.value,class:"type-option",onMouseenter:t=>s.value=e.value,onMouseleave:l[1]||(l[1]=e=>s.value=""),onClick:t=>{var l;return l=e.value,void(a.value.fieldType=l,o.value=!1,(0,i.dY)(()=>{v()}))}},[(0,i.Lk)("div",{class:(0,i.C4)(["type-option-content",{active:a.value.fieldType===e.value}])},[(0,i.Lk)("div",tt,[(0,i.Lk)("div",{class:"type-cus-icon",innerHTML:(0,i.R1)(e$)(e.value)},null,8,tl)]),(0,i.Lk)("span",ti,(0,i.v_)(e.name),1)],2)],40,te))),128))],36)):(0,i.Q3)("",!0)])]),m.value?((0,i.uX)(),(0,i.CE)("div",ta,[l[6]||(l[6]=(0,i.Lk)("label",null,"选项内容",-1)),(0,i.Lk)("div",tn,[(0,i.Lk)("div",{class:"add-option-btn",onClick:h},[(0,i.bF)(w,{class:"plus-icon"},{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.FWt))]),_:1}),l[5]||(l[5]=(0,i.Lk)("div",{class:"plus-text"},"添加选项",-1))]),a.value.options.length>0?((0,i.uX)(),(0,i.CE)("div",to,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.value.options,(e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"option-item",draggable:"true",onDragstart:e=>{d.value=t},onDragover:l[2]||(l[2]=(0,i.D$)(()=>{},["prevent"])),onDragenter:e=>{null!==d.value&&d.value!==t&&e.target.classList.add("drag-over")},onDragleave:g,onDrop:e=>((e,t)=>{if(g(),null===d.value||d.value===t)return;let l=a.value.options[d.value],i=[...a.value.options];i.splice(d.value,1),i.splice(t,0,l),a.value.options=i,d.value=null})(0,t)},[(0,i.Lk)("div",tr,[(0,i.Lk)("div",{class:"drag-icon",innerHTML:(0,i.R1)(ez)},null,8,td),(0,i.Lk)("div",tu,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.value=t,placeholder:"请输入选项"},null,8,tc),[[i.Jo,e.value]])])]),(0,i.Lk)("div",tv,[(0,i.Lk)("button",{class:"delete-btn",onClick:(0,i.D$)(t=>{var l;return l=e.id,void(a.value.options=a.value.options.filter(e=>e.id!==l))},["stop"])},[(0,i.bF)(w,null,{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.bm))]),_:1})],8,tp)])],40,ts))),128))])):(0,i.Q3)("",!0)])])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",{class:"dialog-footer"},[(0,i.Lk)("button",{class:"cancel-btn",onClick:b},"取消"),(0,i.Lk)("button",{class:"confirm-btn",onClick:y},"确定")])])],6)],2)):(0,i.Q3)("",!0)}}}),tg=(0,n.default)(th,[["__scopeId","data-v-35b4bd06"]]);var tm=l(7249);let tf={class:"toolbar-container"},tk={class:"toolbar"},tb={class:"toolbar-left"},ty={key:0,class:"field-config-popup"},tw={class:"field-config-dialog"},tL={class:"dialog-header"},tC={class:"dialog-help-icon"},tR=["innerHTML"],tx={class:"field-list"},tE={class:"field-item-content"},tS={class:"field-icon"},tD=["innerHTML"],tF={class:"field-name"},t_={class:"field-actions"},tM={class:"icon-btn"},tT=["onClick"],tX={class:"field-item-content"},tV={class:"drag-handle"},tH=["innerHTML"],tO={class:"field-icon"},tW=["innerHTML"],tK={class:"field-name"},tj={class:"field-actions"},tP={class:"icon-btn"},tI={class:"icon-btn"},tB={class:"menu-item-content"},tN={class:"menu-item-content"},tA={key:0,class:"filter-popup"},tz={class:"filter-popup-header"},tZ={class:"header-content"},tG={class:"filter-popup-content"},t$={class:"condition-select-wrapper"},tQ=["onClick"],tU={key:0,class:"condition-menu"},tJ=["onClick"],tY={class:"field-item-content"},tq={class:"field-icon"},t0=["innerHTML"],t1={class:"field-name"},t2={class:"condition-select-wrapper"},t4=["onClick"],t5={key:0,class:"condition-menu"},t3=["onClick"],t8=["onClick"],t6=["onClick"],t9=["onClick"],t7=["onClick"],le=["onClick"],lt={class:"condition-input",style:{flex:"1"}},ll=["onClick"],li={key:0,class:"filter-popup sort-popup"},la={class:"filter-popup-header"},ln={class:"filter-popup-content"},lo={class:"filter-condition"},ls={class:"condition-select-wrapper"},lr={key:0,class:"condition-menu"},ld=["onClick"],lu={class:"field-item-content"},lc={class:"field-icon"},lv=["innerHTML"],lp={class:"field-name"},lh={key:0,class:"sort-direction"},lg={key:0,class:"line-height-popup"},lm={class:"line-height-item-content"},lf=["innerHTML"],lk={class:"line-height-item-content"},lb=["innerHTML"],ly={class:"line-height-item-content"},lw=["innerHTML"],lL={class:"line-height-item-content"},lC=["innerHTML"],lR={class:"search-input-container"},lx={class:"toolbar-right"},lE={key:0,class:"toolbar-btn"},lS={key:1,class:"toolbar-btn"},lD={key:2,class:"toolbar-btn"},lF=(0,i.pM)({__name:"CToolbar",props:{fields:{},lineHeight:{},visibleButtons:{},searchFields:{}},emits:["close","fieldSelected","addField","updateFieldVisibility","updateField","fieldReordered","lineHeightChanged","addRecord","search","filter","sort","openAddRecordDialog"],setup(e,t){let{emit:l}=t,a=(0,i.KR)(!1),n=(0,i.KR)(null),o=(0,i.KR)(!1),s=(0,i.KR)(null),r=(0,i.KR)({left:0,top:0}),d=(0,i.KR)(!1),u=(0,i.KR)(null),c=(0,i.KR)([]),v=(0,i.KR)(!1),p=(0,i.KR)(!1),h=(0,i.KR)(e.lineHeight||"low"),g=(0,i.KR)(null),m=(0,i.KR)(!1),f=(0,i.KR)(""),k=(0,i.KR)(null),b=(0,i.KR)(!1),y=(0,i.KR)(!1),w=(0,i.KR)(null),L=(0,i.KR)("asc"),C=(0,i.KR)(null),R=(0,i.KR)(null),x=(0,i.KR)(!1),E=(0,i.KR)([]),S=(0,i.KR)([]),D={tags:eq,progress:eY,single:eY,taskType:e0,taskProcess:e0},F=(0,i.KR)([]);(0,i.wB)(()=>e.fields,e=>{e.length>1&&(c.value=[...e.slice(1)])},{immediate:!0});let _=e=>{if(o.value=!1,v.value=!0,e.target instanceof HTMLElement){let t=e.target.closest(".field-item");t&&t.classList.add("dragging")}},M=t=>{if(t.target instanceof HTMLElement){let e=t.target.closest(".field-item");e&&e.classList.remove("dragging")}v.value=!1;let i=[];e.fields.length>0&&(i.push({...e.fields[0]}),c.value.forEach(e=>{i.push({...e})}),console.log("字段顺序已更新:",i.map(e=>e.name)),l("fieldReordered",i))},T=(e,t)=>{l("updateFieldVisibility",e.id,t)},X=e=>{l("fieldSelected",e)},V=(e,t)=>{if(t.stopPropagation(),s.value=e,t.currentTarget instanceof HTMLElement){let e=t.currentTarget.getBoundingClientRect(),l=window.innerWidth,i=window.innerHeight,a=e.right+8,n=e.top+e.height/2-16;a+120>l&&(a=e.left-120-8),n+100>i&&(n=Math.max(0,i-100-34)),r.value={left:a,top:n}}o.value=!0},H=()=>{d.value=!1,a.value=!0,u.value=null},O=t=>{if(console.log("Confirm edit field with data:",t),!t){console.error("No data provided for confirmEditField"),H();return}if(u.value){let i=u.value,a=e.fields.findIndex(e=>e.id===i.id);if(-1!==a){let e={...i,name:void 0!==t.title?t.title:i.name,type:void 0!==t.fieldType?t.fieldType:i.type};if(a>0){let t=a-1;t>=0&&t<c.value.length&&(c.value=c.value.map((l,i)=>i===t?e:l),c.value=[...c.value])}void 0!==i.id&&l("updateField",i.id,e)}}H()},W=()=>{l("addField")},K=()=>{a.value=!a.value},P=()=>{l("openAddRecordDialog")},I=()=>{let t=f.value.trim();console.log("Search keyword:",t),console.log("Search fields:",e.searchFields),l("search",t,e.searchFields)},B=()=>{b.value=!b.value},N=()=>{y.value=!y.value,x.value=!1},A=()=>{setTimeout(()=>{x.value=!x.value,y.value=!0},200)},z=(e,t)=>{t&&t.stopPropagation(),w.value=e,console.log("Selected condition:",e),""===e&&(y.value=!0)},Z=()=>{F.value=[],E.value=[]},G=()=>{w.value=null,L.value="asc",y.value=!1},$=()=>{F.value.push({field:"",operator:"=",value:""}),E.value.push(!1),S.value.push(!1)},Q=t=>{let l=e.fields.find(e=>e.field===t);return l?l.type:"text"},U=(e,t,l)=>{F.value[t].operator=e,S.value[t]=!1,l&&l.stopPropagation()},J=()=>{let e=F.value.filter(e=>e.field&&e.value);F.value=e,e.length>0&&l("filter",e),b.value=!1},Y=()=>{let e=F.value.filter(e=>e.field&&e.value);F.value=e,b.value=!1},q=()=>{w.value&&l("sort",w.value,L.value),y.value=!1},ee=e=>{console.log("Click outside");let t=e.target;if(t.closest(".el-select-dropdown")||t.closest(".el-picker-panel")||t.closest(".el-tooltip__popper"))return;let i=e.target.closest(".field-config-popup");!n.value||n.value.contains(e.target)||i||d.value||(a.value=!1,o.value=!1,l("close")),o.value=!1,g.value&&!g.value.contains(e.target)&&(p.value=!1),k.value&&!k.value.contains(e.target)&&(m.value=!1);let s=e.target.closest(".filter-popup");if(C.value&&!C.value.contains(e.target)&&(b.value=!1,E.value=E.value.map(()=>!1),S.value=S.value.map(()=>!1)),s){let t=e.target.closest(".condition-menu"),l=e.target.closest(".condition-select");t||l||(E.value=E.value.map(()=>!1),S.value=S.value.map(()=>!1))}if(R.value&&!R.value.contains(e.target)&&(y.value=!1,x.value=!1),x.value&&R.value){let t=R.value.querySelector(".condition-menu");t&&!t.contains(e.target)&&(x.value=!1)}},et=()=>{p.value=!p.value},el=(e,t)=>{t&&t.stopPropagation(),h.value=e,l("lineHeightChanged",e),console.log(`行高已设置为: ${e}`)};return(0,i.sV)(()=>{document.addEventListener("click",ee)}),(0,i.hi)(()=>{document.removeEventListener("click",ee)}),(t,l)=>{var m,ee,ei,ea,en,eo,es,er,ed,eu,ec,ev,ep;let eh=(0,i.g2)("el-date-picker"),eg=(0,i.g2)("el-input-number"),em=(0,i.g2)("el-option"),ef=(0,i.g2)("el-select"),ek=(0,i.g2)("el-checkbox");return(0,i.uX)(),(0,i.CE)("div",tf,[(0,i.Lk)("div",tk,[(0,i.Lk)("div",tb,[(null==(ee=e.visibleButtons)||null==(m=ee.add)?void 0:m.enable)?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"toolbar-btn toolbar-btn-add",onClick:P},[(0,i.bF)((0,i.R1)(ej.t),null,{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.FWt))]),_:1}),(0,i.eW)(" "+(0,i.v_)((null==(ea=e.visibleButtons)||null==(ei=ea.add)?void 0:ei.name)||"添加"),1)])):(0,i.Q3)("",!0),(null==(en=e.visibleButtons)?void 0:en.fieldConfig)?((0,i.uX)(),(0,i.CE)("div",{key:1,class:"field-config-wrapper",ref_key:"fieldConfigWrapper",ref:n},[(0,i.Lk)("button",{onClick:K,class:"toolbar-btn"},[(0,i.bF)((0,i.R1)(ej.t),null,{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.B5R))]),_:1}),l[15]||(l[15]=(0,i.eW)(" 字段配置 ",-1))]),a.value?((0,i.uX)(),(0,i.CE)("div",ty,[(0,i.Lk)("div",tw,[(0,i.Lk)("div",tL,[l[16]||(l[16]=(0,i.Lk)("div",{class:"dialog-title"},"字段配置",-1)),(0,i.Lk)("div",tC,[(0,i.Lk)("div",{innerHTML:(0,i.R1)(eI)},null,8,tR)])]),(0,i.Lk)("div",tx,[e.fields.length>0?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"field-item border-b",onClick:l[1]||(l[1]=t=>X(e.fields[0]))},[(0,i.Lk)("div",tE,[(0,i.Lk)("div",{class:(0,i.C4)(["field-item-content-left",{invisible:!e.fields[0].invisible}])},[(0,i.Lk)("div",tS,[(0,i.Lk)("div",{innerHTML:(0,i.R1)(e$)(e.fields[0].type)},null,8,tD)]),(0,i.Lk)("div",tF,(0,i.v_)(e.fields[0].name),1),(0,i.bF)((0,i.R1)(ej.t),{size:"14",class:"lock-icon"},{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.c_I))]),_:1})],2),(0,i.Lk)("div",t_,[l[17]||(l[17]=(0,i.Lk)("div",null,null,-1)),(0,i.Lk)("div",tM,[(0,i.bF)((0,i.R1)(ej.t),{onClick:l[0]||(l[0]=(0,i.D$)(t=>V(e.fields[0],t),["stop"]))},{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.yGC))]),_:1})])])])])):(0,i.Q3)("",!0),l[18]||(l[18]=(0,i.Lk)("div",{class:"draggable-list-divider"},null,-1)),e.fields.length>1?((0,i.uX)(),(0,i.Wv)((0,i.R1)(tm.A),{key:1,modelValue:c.value,"onUpdate:modelValue":l[2]||(l[2]=e=>c.value=e),"item-key":"id",class:(0,i.C4)(["draggable-list",{"is-dragging":v.value}]),"ghost-class":"ghost-class","chosen-class":"chosen-class",animation:"200",handle:".field-item",onStart:_,onEnd:M},{item:(0,i.k6)(e=>{let{element:t}=e;return[(0,i.Lk)("div",{class:"field-item sub-item",onClick:e=>X(t)},[(0,i.Lk)("div",tX,[(0,i.Lk)("div",{class:(0,i.C4)(["field-item-content-left",{invisible:!t.invisible}])},[(0,i.Lk)("div",tV,[(0,i.Lk)("div",{innerHTML:(0,i.R1)(ez)},null,8,tH)]),(0,i.Lk)("div",tO,[(0,i.Lk)("div",{innerHTML:(0,i.R1)(e$)(t.type)},null,8,tW)]),(0,i.Lk)("div",tK,(0,i.v_)(t.name),1)],2),(0,i.Lk)("div",tj,[(0,i.Lk)("div",tP,[t.invisible?((0,i.uX)(),(0,i.Wv)((0,i.R1)(ej.t),{key:0,onClick:(0,i.D$)(e=>T(t,!1),["stop"])},{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.Ss2))]),_:1},8,["onClick"])):((0,i.uX)(),(0,i.Wv)((0,i.R1)(ej.t),{key:1,onClick:(0,i.D$)(e=>T(t,!0),["stop"])},{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.LdN))]),_:1},8,["onClick"]))]),(0,i.Lk)("div",tI,[(0,i.bF)((0,i.R1)(ej.t),{onClick:(0,i.D$)(e=>V(t,e),["stop"])},{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.yGC))]),_:1},8,["onClick"])])])])],8,tT)]}),_:1},8,["modelValue","class"])):(0,i.Q3)("",!0),l[19]||(l[19]=(0,i.Lk)("div",{class:"draggable-list-divider"},null,-1))]),(0,i.Lk)("button",{class:"add-field-btn",onClick:W},[...l[20]||(l[20]=[(0,i.Lk)("span",{class:"add-icon"},"+",-1),(0,i.eW)(" 新增字段 ",-1)])])]),o.value&&s.value?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"field-context-menu",style:(0,i.Tr)({left:r.value.left+"px",top:r.value.top+"px"}),onClick:l[5]||(l[5]=(0,i.D$)(()=>{},["stop"]))},[(0,i.Lk)("div",{class:"menu-item border-b",onClick:l[3]||(l[3]=e=>{var t;console.log("Edit field:",(t=s.value).name),o.value=!1,u.value=t,d.value=!0})},[(0,i.Lk)("div",tB,[(0,i.bF)((0,i.R1)(ej.t),null,{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.EDh))]),_:1}),l[21]||(l[21]=(0,i.Lk)("span",null,"编辑",-1))])]),(0,i.Lk)("div",{class:"menu-item delete",onClick:l[4]||(l[4]=e=>{console.log("Delete field:",s.value.name),o.value=!1})},[(0,i.Lk)("div",tN,[(0,i.bF)((0,i.R1)(ej.t),null,{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.epd))]),_:1}),l[22]||(l[22]=(0,i.Lk)("span",null,"删除",-1))])])],4)):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0)],512)):(0,i.Q3)("",!0),(0,i.RG)(t.$slots,"toolbar-left"),(null==(eo=e.visibleButtons)?void 0:eo.filter)?((0,i.uX)(),(0,i.CE)("div",{key:2,class:"filter-wrapper",ref_key:"filterWrapper",ref:C},[(0,i.Lk)("button",{onClick:B,class:"toolbar-btn"},[(0,i.bF)((0,i.R1)(ej.t),null,{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.dJT))]),_:1}),l[23]||(l[23]=(0,i.eW)(" 筛选 ",-1))]),b.value?((0,i.uX)(),(0,i.CE)("div",tA,[(0,i.Lk)("div",tz,[(0,i.Lk)("div",tZ,[l[24]||(l[24]=(0,i.Lk)("h3",null,"设置筛选条件",-1)),(0,i.bF)((0,i.R1)(ej.t),{class:"help-icon"},{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.adD))]),_:1})]),(0,i.Lk)("button",{class:"filter-popup-close",onClick:Y}," \xd7 ")]),(0,i.Lk)("div",tG,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(F.value,(t,a)=>{var n;let o;return(0,i.uX)(),(0,i.CE)("div",{key:a,class:"filter-condition"},[(0,i.Lk)("div",t$,[(0,i.Lk)("div",{class:"condition-select",onClick:e=>{E.value=E.value.map((e,t)=>t===a&&!E.value[t]),S.value=S.value.map(()=>!1)}},[(0,i.Lk)("span",null,(0,i.v_)((n=t.field,(null==(o=e.fields.find(e=>e.field===n))?void 0:o.name)||"选择字段")),1),(0,i.bF)((0,i.R1)(ej.t),{class:(0,i.C4)({rotate:E.value[a]})},{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.BHL))]),_:1},8,["class"])],8,tQ),E.value[a]?((0,i.uX)(),(0,i.CE)("div",tU,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.fields,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id},[(0,i.Lk)("div",{class:(0,i.C4)(["field-item sub-item",{active:t.field===e.field}]),onClick:t=>{F.value[a].field=e.field,F.value[a].value="",E.value[a]=!1,t.stopPropagation()}},[(0,i.Lk)("div",tY,[(0,i.Lk)("div",tq,[(0,i.Lk)("div",{innerHTML:(0,i.R1)(e$)(e.type)},null,8,t0)]),(0,i.Lk)("div",t1,(0,i.v_)(e.name),1)])],10,tJ)]))),128))])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",t2,[(0,i.Lk)("div",{class:"condition-select",onClick:e=>{S.value=S.value.map((e,t)=>t===a&&!S.value[t]),E.value=E.value.map(()=>!1)}},[(0,i.Lk)("span",null,(0,i.v_)({"=":"等于","!=":"不等于",contains:"包含",not_contains:"不包含",">":"大于","<":"小于"}[t.operator]||"等于"),1),(0,i.bF)((0,i.R1)(ej.t),{class:(0,i.C4)({rotate:S.value[a]})},{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.BHL))]),_:1},8,["class"])],8,t4),S.value[a]?((0,i.uX)(),(0,i.CE)("div",t5,[(0,i.Lk)("div",{class:(0,i.C4)(["field-item sub-item",{active:"="===t.operator}]),onClick:e=>U("=",a,e)},[...l[25]||(l[25]=[(0,i.Lk)("div",{class:"field-item-content"},[(0,i.Lk)("div",{class:"field-name"},"等于")],-1)])],10,t3),(0,i.Lk)("div",{class:(0,i.C4)(["field-item sub-item",{active:"!="===t.operator}]),onClick:e=>U("!=",a,e)},[...l[26]||(l[26]=[(0,i.Lk)("div",{class:"field-item-content"},[(0,i.Lk)("div",{class:"field-name"},"不等于")],-1)])],10,t8),(0,i.Lk)("div",{class:(0,i.C4)(["field-item sub-item",{active:"contains"===t.operator}]),onClick:e=>U("contains",a,e)},[...l[27]||(l[27]=[(0,i.Lk)("div",{class:"field-item-content"},[(0,i.Lk)("div",{class:"field-name"},"包含")],-1)])],10,t6),(0,i.Lk)("div",{class:(0,i.C4)(["field-item sub-item",{active:"not_contains"===t.operator}]),onClick:e=>U("not_contains",a,e)},[...l[28]||(l[28]=[(0,i.Lk)("div",{class:"field-item-content"},[(0,i.Lk)("div",{class:"field-name"},"不包含")],-1)])],10,t9),(0,i.Lk)("div",{class:(0,i.C4)(["field-item sub-item",{active:">"===t.operator}]),onClick:e=>U(">",a,e)},[...l[29]||(l[29]=[(0,i.Lk)("div",{class:"field-item-content"},[(0,i.Lk)("div",{class:"field-name"},"大于")],-1)])],10,t7),(0,i.Lk)("div",{class:(0,i.C4)(["field-item sub-item",{active:"<"===t.operator}]),onClick:e=>U("<",a,e)},[...l[30]||(l[30]=[(0,i.Lk)("div",{class:"field-item-content"},[(0,i.Lk)("div",{class:"field-name"},"小于")],-1)])],10,le)])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",lt,["text"===Q(t.field)?((0,i.uX)(),(0,i.Wv)((0,i.R1)(eP.W),{key:0,modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,type:"text",class:"search-input",placeholder:"请输入文本"},null,8,["modelValue","onUpdate:modelValue"])):"date"===Q(t.field)?((0,i.uX)(),(0,i.Wv)(eh,{key:1,modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,type:"date",placeholder:"选择日期",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])):"number"===Q(t.field)?((0,i.uX)(),(0,i.Wv)(eg,{key:2,modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,placeholder:"请输入数值",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])):"user"===Q(t.field)?((0,i.uX)(),(0,i.Wv)(ef,{key:3,modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,placeholder:"请选择用户",style:{width:"100%"},class:"el-items"},{default:(0,i.k6)(()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)((0,i.R1)(eJ)||[],(e,t)=>((0,i.uX)(),(0,i.Wv)(em,{key:t,label:t,value:t},{default:(0,i.k6)(()=>[(0,i.eW)((0,i.v_)(e)+" "+(0,i.v_)(t),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue"])):Q(t.field)in D?((0,i.uX)(),(0,i.Wv)(ef,{key:4,modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,multiple:"multiple"===Q(t.field),placeholder:"请选择选项",style:{width:"100%"},class:"el-items"},{default:(0,i.k6)(()=>{var l;let a;return[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(D[l=t.field,(a=e.fields.find(e=>e.field===l))?a.field:""]||[],e=>((0,i.uX)(),(0,i.Wv)(em,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]}),_:2},1032,["modelValue","onUpdate:modelValue","multiple"])):"checkbox"===Q(t.field)?((0,i.uX)(),(0,i.Wv)(ek,{key:5,modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,class:"check-box",border:""},{default:(0,i.k6)(()=>[...l[31]||(l[31]=[(0,i.eW)(" 是 ",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])):((0,i.uX)(),(0,i.Wv)((0,i.R1)(eP.W),{key:6,modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,type:"text",placeholder:"请输入"},null,8,["modelValue","onUpdate:modelValue"]))]),(0,i.Lk)("button",{class:"remove-condition",onClick:e=>{e&&e.stopPropagation(),F.value.splice(a,1),E.value.splice(a,1),S.value.splice(a,1)}},[(0,i.bF)((0,i.R1)(ej.t),{class:"close-icon"},{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.bm))]),_:1})],8,ll)])}),128)),(0,i.Lk)("button",{class:"add-condition-btn",onClick:$,style:{}},[(0,i.bF)((0,i.R1)(ej.t),null,{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.FWt))]),_:1}),l[32]||(l[32]=(0,i.eW)(" 添加条件 ",-1))])]),(0,i.Lk)("div",{class:"filter-popup-footer"},[(0,i.Lk)("button",{class:"cancel-btn",onClick:Z},"重置"),(0,i.Lk)("button",{class:"apply-btn",onClick:J},"应用")])])):(0,i.Q3)("",!0)],512)):(0,i.Q3)("",!0),(null==(es=e.visibleButtons)?void 0:es.sort)?((0,i.uX)(),(0,i.CE)("div",{key:3,class:"sort-wrapper",ref_key:"sortWrapper",ref:R},[(0,i.Lk)("button",{onClick:N,class:"toolbar-btn"},[(0,i.bF)((0,i.R1)(ej.t),null,{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.FUI))]),_:1}),l[33]||(l[33]=(0,i.eW)(" 排序 ",-1))]),y.value?((0,i.uX)(),(0,i.CE)("div",li,[(0,i.Lk)("div",la,[l[34]||(l[34]=(0,i.Lk)("h3",null,"设置排序条件",-1)),(0,i.Lk)("button",{class:"filter-popup-close",onClick:l[6]||(l[6]=e=>y.value=!1)}," \xd7 ")]),(0,i.Lk)("div",ln,[(0,i.Lk)("div",lo,[(0,i.Lk)("div",ls,[(0,i.Lk)("div",{class:"condition-select",onClick:A},[(0,i.Lk)("span",null,(0,i.v_)(w.value?null==(er=w.value)?void 0:er.name:"选择条件"),1),(0,i.bF)((0,i.R1)(ej.t),{class:(0,i.C4)({rotate:x.value})},{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.BHL))]),_:1},8,["class"])]),x.value?((0,i.uX)(),(0,i.CE)("div",lr,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.fields,e=>{var t;return(0,i.uX)(),(0,i.CE)("div",{key:e.id},[(0,i.Lk)("div",{class:(0,i.C4)(["field-item sub-item",{active:(null==(t=w.value)?void 0:t.field)===e.field}]),onClick:t=>z(e,t)},[(0,i.Lk)("div",lu,[(0,i.Lk)("div",lc,[(0,i.Lk)("div",{innerHTML:(0,i.R1)(e$)(e.type)},null,8,lv)]),(0,i.Lk)("div",lp,(0,i.v_)(e.name),1)])],10,ld)])}),128))])):(0,i.Q3)("",!0)]),w.value?((0,i.uX)(),(0,i.CE)("div",lh,[(0,i.Lk)("button",{class:(0,i.C4)({active:"asc"===L.value}),onClick:l[7]||(l[7]=e=>L.value="asc")}," A → Z ",2),(0,i.Lk)("button",{class:(0,i.C4)({active:"desc"===L.value}),onClick:l[8]||(l[8]=e=>L.value="desc")}," Z → A ",2),(0,i.Lk)("button",{class:"remove-condition",onClick:l[9]||(l[9]=e=>z(null,e))},[(0,i.bF)((0,i.R1)(ej.t),{class:"close-icon"},{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.bm))]),_:1})])])):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",{class:"filter-popup-footer"},[(0,i.Lk)("button",{class:"cancel-btn",onClick:G},"取消"),(0,i.Lk)("button",{class:"apply-btn",onClick:q},"应用")])])):(0,i.Q3)("",!0)],512)):(0,i.Q3)("",!0),(null==(ed=e.visibleButtons)?void 0:ed.lineHeight)?((0,i.uX)(),(0,i.CE)("div",{key:4,class:"line-height-wrapper",ref_key:"lineHeightWrapper",ref:g},[(0,i.Lk)("button",{onClick:et,class:"toolbar-btn"},[(0,i.bF)((0,i.R1)(ej.t),null,{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.IaS))]),_:1}),l[35]||(l[35]=(0,i.eW)(" 行高 ",-1))]),p.value?((0,i.uX)(),(0,i.CE)("div",lg,[(0,i.Lk)("div",{class:(0,i.C4)(["line-height-item",{active:"low"===h.value}]),onClick:l[10]||(l[10]=e=>el("low",e))},[(0,i.Lk)("div",lm,[(0,i.Lk)("div",{class:"line-height-icon",innerHTML:(0,i.R1)('<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="RowHeightOutlined"><path d="M19 2.5a1 1 0 0 1 .76.35l3 3.5a1 1 0 0 1-1.52 1.3L20 6.204v11.594l1.24-1.448a1 1 0 1 1 1.52 1.302l-3 3.5a1 1 0 0 1-1.52 0l-3-3.5a1 1 0 1 1 1.52-1.302L18 17.797V6.203l-1.24 1.448a1 1 0 0 1-1.52-1.302l3-3.5A1 1 0 0 1 19 2.5ZM2 4a1 1 0 0 0 0 2h9a1 1 0 1 0 0-2H2Zm0 7a1 1 0 1 0 0 2h9a1 1 0 1 0 0-2H2Zm-1 8a1 1 0 0 1 1-1h9a1 1 0 1 1 0 2H2a1 1 0 0 1-1-1Z" fill="currentColor"></path></svg>')},null,8,lf),l[36]||(l[36]=(0,i.Lk)("div",null,"低",-1))])],2),(0,i.Lk)("div",{class:(0,i.C4)(["line-height-item",{active:"medium"===h.value}]),onClick:l[11]||(l[11]=e=>el("medium",e))},[(0,i.Lk)("div",lk,[(0,i.Lk)("div",{class:"line-height-icon",innerHTML:(0,i.R1)('<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="RowMediumOutlined"><path d="M19.76 2.85a1 1 0 0 0-1.52 0l-3 3.5a1 1 0 1 0 1.52 1.3L18 6.204v11.594l-1.24-1.448a1 1 0 0 0-1.52 1.302l3 3.5a1 1 0 0 0 1.52 0l3-3.5a1 1 0 0 0-1.52-1.302L20 17.797V6.203l1.24 1.448a1 1 0 1 0 1.52-1.302l-3-3.5ZM2 3a1 1 0 0 0-1 1v2.76a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1H2Zm0 9a1 1 0 1 0 0 2h9a1 1 0 1 0 0-2H2Zm-1 8a1 1 0 0 1 1-1h9a1 1 0 1 1 0 2H2a1 1 0 0 1-1-1Z" fill="currentColor"></path></svg>')},null,8,lb),l[37]||(l[37]=(0,i.Lk)("div",null,"中等",-1))])],2),(0,i.Lk)("div",{class:(0,i.C4)(["line-height-item",{active:"high"===h.value}]),onClick:l[12]||(l[12]=e=>el("high",e))},[(0,i.Lk)("div",ly,[(0,i.Lk)("div",{class:"line-height-icon",innerHTML:(0,i.R1)('<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="RowTallOutlined"><path d="M19.76 2.85a1 1 0 0 0-1.52 0l-3 3.5a1 1 0 1 0 1.52 1.3L18 6.204v11.594l-1.24-1.448a1 1 0 0 0-1.52 1.302l3 3.5a1 1 0 0 0 1.52 0l3-3.5a1 1 0 0 0-1.52-1.302L20 17.797V6.203l1.24 1.448a1 1 0 1 0 1.52-1.302l-3-3.5ZM1 4a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v9a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4Zm0 16a1 1 0 0 1 1-1h9a1 1 0 1 1 0 2H2a1 1 0 0 1-1-1Z" fill="currentColor"></path></svg>')},null,8,lw),l[38]||(l[38]=(0,i.Lk)("div",null,"高",-1))])],2),(0,i.Lk)("div",{class:(0,i.C4)(["line-height-item",{active:"ultra-high"===h.value}]),onClick:l[13]||(l[13]=e=>el("ultra-high",e))},[(0,i.Lk)("div",lL,[(0,i.Lk)("div",{class:"line-height-icon",innerHTML:(0,i.R1)('<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="RowExtratallOutlined"><path d="M19.76 2.85a1 1 0 0 0-1.52 0l-3 3.5a1 1 0 1 0 1.52 1.3L18 6.204v11.594l-1.24-1.448a1 1 0 0 0-1.52 1.302l3 3.5a1 1 0 0 0 1.52 0l3-3.5a1 1 0 0 0-1.52-1.302L20 17.797V6.203l1.24 1.448a1 1 0 1 0 1.52-1.302l-3-3.5ZM2 3a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1H2Z" fill="currentColor"></path></svg>')},null,8,lC),l[39]||(l[39]=(0,i.Lk)("div",null,"超高",-1))])],2)])):(0,i.Q3)("",!0)],512)):(0,i.Q3)("",!0),(null==(eu=e.visibleButtons)?void 0:eu.search)?((0,i.uX)(),(0,i.CE)("div",{key:5,class:"search-wrapper",ref_key:"searchWrapper",ref:k},[(0,i.Lk)("div",lR,[(0,i.bF)((0,i.R1)(eP.W),{modelValue:f.value,"onUpdate:modelValue":l[14]||(l[14]=e=>f.value=e),placeholder:"输入关键词",size:"small",class:"search-input","prefix-icon":(0,i.R1)(j.vji),onKeyup:(0,i.jR)(I,["enter"])},null,8,["modelValue","prefix-icon"])])],512)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",lx,[(0,i.RG)(t.$slots,"toolbar-right-before"),(null==(ec=e.visibleButtons)?void 0:ec.help)?((0,i.uX)(),(0,i.CE)("button",lE,[(0,i.bF)((0,i.R1)(ej.t),null,{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.adD))]),_:1})])):(0,i.Q3)("",!0),(null==(ev=e.visibleButtons)?void 0:ev.log)?((0,i.uX)(),(0,i.CE)("button",lS,[(0,i.bF)((0,i.R1)(ej.t),null,{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.zD7))]),_:1})])):(0,i.Q3)("",!0),(null==(ep=e.visibleButtons)?void 0:ep.export)?((0,i.uX)(),(0,i.CE)("button",lD,[(0,i.bF)((0,i.R1)(ej.t),null,{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.e7F))]),_:1}),l[40]||(l[40]=(0,i.eW)("生成表单 ",-1))])):(0,i.Q3)("",!0),(0,i.RG)(t.$slots,"toolbar-right-after")])]),(0,i.bF)(tg,{visible:d.value,field:u.value||void 0,position:r.value,onClose:H,onConfirm:O},null,8,["visible","field","position"])])}}}),l_=(0,n.default)(lF,[["__scopeId","data-v-2dd0193e"]]),lM={key:0,class:"batch-operations-layer"},lT={class:"selected-count"},lX=(0,i.pM)({__name:"CLBatchOpToolbar",props:{show:{type:Boolean,default:!1},selectedCount:{type:Number,default:0}},emits:["delete"],setup(e,t){let{emit:l}=t,a=()=>{l("delete")};return(t,l)=>e.show&&e.selectedCount>0?((0,i.uX)(),(0,i.CE)("div",lM,[l[0]||(l[0]=(0,i.Lk)("span",null,"全选本页",-1)),(0,i.Lk)("span",lT,"已选择 "+(0,i.v_)(e.selectedCount)+" 个工作项",1),(0,i.RG)(t.$slots,"default"),(0,i.Lk)("button",{class:"batch-btn",onClick:a},"删除")])):(0,i.Q3)("",!0)}}),lV=(0,n.default)(lX,[["__scopeId","data-v-3de8f5fa"]]);var lH=l(62317),lO=l(61343),lW=l(43399),lK=l(72108),lj=l(83331),lP=l(42608),lI=l(21714),lB=l(57503),lN=l(96864),lA=l(11018),lz=l(97039),lZ=l(99851),lG=l(80724);l(1559);class l${onStart(e){let{container:t,referencePosition:a,value:n,endEdit:o}=e;this.container=t,this.endEditCallback=o,this.editorElement=document.createElement("div"),this.editorElement.style.position="absolute",this.editorElement.style.zIndex="10000",this.editorElement.style.backgroundColor="#fff",t.appendChild(this.editorElement),this.adjustPosition(this.editorElement,a.rect),this.selectedValue.value=n;let{createApp:s}=l(6934);this.app=s({components:{ElSelect:lG.AV,ElOption:lG.P9},setup:()=>{let e=e=>{if(this.selectedValue.value=e,!this.config.multiple){var t;null==(t=this.endEditCallback)||t.call(this)}},t=e=>{if(!e&&this.config.multiple){var t;null==(t=this.endEditCallback)||t.call(this)}},l=()=>{setTimeout(()=>{if(!document.querySelector(".el-select-dropdown")){var e;null==(e=this.endEditCallback)||e.call(this)}},150)},i=e=>{var t,l;"Enter"===e.key?(e.preventDefault(),null==(t=this.endEditCallback)||t.call(this)):"Escape"===e.key&&(e.preventDefault(),null==(l=this.endEditCallback)||l.call(this))};return{selectedValue:this.selectedValue,config:this.config,handleChange:e,handleVisibleChange:t,handleBlur:l,handleKeyDown:i}},template:`
        <el-select
          v-model="selectedValue"
          :multiple="config.multiple"
          :filterable="config.filterable"
          :allow-create="config.allowCreate"
          :placeholder="config.placeholder"
          :teleported="config.teleported"
          @change="handleChange"
          @visible-change="handleVisibleChange"
          @blur="handleBlur"
          @keydown="handleKeyDown"
          style="width: 100%; height: 100%; border:none; margin: 0;"
        >
          <el-option
            v-for="item in config.options"
            :key="item.value"
            :label="item.label"
            :value="item.value"
          >
            <div v-if="item.tag" class="option-tag tag-{{ item.tag.toLowerCase() }}">{{ item.tag }}</div>
            <span>{{ item.label }}</span>
          </el-option>
        </el-select>
      `}),this.app.mount(this.editorElement),(0,i.dY)(()=>{var e;let t=null==(e=this.editorElement)?void 0:e.querySelector("input");t&&t.focus(),setTimeout(()=>{var e;let t=null==(e=this.editorElement)?void 0:e.querySelector(".el-select__trigger");t&&t.click()},100)})}adjustPosition(e,t){e.style.top=`${t.top+1}px`,e.style.left=`${t.left+1}px`,e.style.width=`${t.width-3}px`,e.style.height=`${t.height-3}px`}onEnd(){this.app&&(this.app.unmount(),this.app=null),this.container&&this.editorElement&&this.container.contains(this.editorElement)&&this.container.removeChild(this.editorElement),this.editorElement=null,this.endEditCallback=null}getValue(){return this.selectedValue.value}isEditorElement(e){if(this.editorElement&&this.editorElement.contains(e))return!0;let t=document.querySelector(".el-select-dropdown");return!!(t&&t.contains(e))}constructor(e){(0,lZ._)(this,"config",void 0),(0,lZ._)(this,"app",null),(0,lZ._)(this,"container",null),(0,lZ._)(this,"selectedValue",(0,i.KR)(null)),(0,lZ._)(this,"endEditCallback",null),(0,lZ._)(this,"editorElement",null),this.config={multiple:!1,filterable:!0,allowCreate:!1,placeholder:"查找或创建选项",teleported:!1,...e}}}var lQ=l(33682);class lU{onStart(e){let{container:t,referencePosition:a,value:n,endEdit:o}=e;this.container=t,this.endEditCallback=o,this.editorElement=document.createElement("div"),this.editorElement.style.position="absolute",this.editorElement.style.zIndex="10000",this.editorElement.style.backgroundColor="#fff",t.appendChild(this.editorElement),this.adjustPosition(this.editorElement,a.rect),this.dateValue.value=this.formatDateValue(n);let{createApp:s}=l(6934);this.app=s({components:{ElDatePicker:lQ.M},setup:()=>{let e=e=>{this.dateValue.value=e},t=()=>{var e;null==(e=this.endEditCallback)||e.call(this)},l=e=>{var t,l;"Enter"===e.key?(e.preventDefault(),null==(t=this.endEditCallback)||t.call(this)):"Escape"===e.key&&(e.preventDefault(),this.dateValue.value=n,null==(l=this.endEditCallback)||l.call(this))};return{dateValue:this.dateValue,config:this.config,handleChange:e,handleBlur:t,handleKeyDown:l}},template:`
        <el-date-picker
          v-model="dateValue"
          :type="config.type"
          :value-format="config.valueFormat"
          :placeholder="config.placeholder"
          :clearable="config.clearable"
          :editable="config.editable"
          :teleported="config.teleported"
          @change="handleChange"
          @blur="handleBlur"
          @keydown="handleKeyDown"
          style="width: 100%; height: 100%; border:none; margin: 0;"
          class="vtable-date-picker"
        />
      `}),this.app.mount(this.editorElement),(0,i.dY)(()=>{var e;let t=null==(e=this.editorElement)?void 0:e.querySelector("input");t&&(t.focus(),t.addEventListener("blur",()=>{setTimeout(()=>{if(!this.isDatePickerOpen()){var e;null==(e=this.endEditCallback)||e.call(this)}},200)}))})}adjustPosition(e,t){e.style.top=`${t.top-1}px`,e.style.left=`${t.left-2}px`,e.style.width=`${t.width+2}px`,e.style.height=`${t.height+2}px`}onEnd(){this.app&&(this.app.unmount(),this.app=null),this.container&&this.editorElement&&this.container.contains(this.editorElement)&&this.container.removeChild(this.editorElement),this.editorElement=null,this.endEditCallback=null}getValue(){return this.dateValue.value}isEditorElement(e){if(this.editorElement&&this.editorElement.contains(e))return!0;let t=document.querySelector(".el-picker__popper");return!!(t&&t.contains(e))}isDatePickerOpen(){return null!==document.querySelector(".el-picker__popper")}formatDateValue(e){if(!e)return null;if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;try{let t=new Date(e);if(!isNaN(t.getTime())){let e=t.getFullYear(),l=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return`${e}-${l}-${i}`}}catch(e){console.error("Failed to parse date:",e)}return e}constructor(e={}){(0,lZ._)(this,"config",void 0),(0,lZ._)(this,"app",null),(0,lZ._)(this,"container",null),(0,lZ._)(this,"dateValue",(0,i.KR)(null)),(0,lZ._)(this,"endEditCallback",null),(0,lZ._)(this,"editorElement",null),this.config={type:"date",valueFormat:"YYYY-MM-DD",placeholder:"选择日期",clearable:!0,editable:!1,teleported:!1,...e}}}let lJ=[{value:"已完成",label:"已完成",tag:"已完成"},{value:"进行中",label:"进行中",tag:"进行中"},{value:"未开始",label:"未开始",tag:"未开始"}],lY=[{value:"P0",label:"P0",tag:"P0"},{value:"P1",label:"P1",tag:"P1"},{value:"P2",label:"P2",tag:"P2"},{value:"P3",label:"P3",tag:"P3"},{value:"P4",label:"P4",tag:"P4"},{value:"P5",label:"P5",tag:"P5"}],lq={P0:"#ff4d4f",P1:"#fa8c16",P2:"#1890ff",P3:"#52c41a",P4:"pink",P5:"orange"},l0={已完成:"#52c41a",进行中:"#1890ff",未开始:"#8c8c8c"},l1=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal",t="gantt"===e?lN.ZX:lA,l=new lz.M;t.register.editor("input-editor",l);let i=new lU({valueFormat:"YYYY-MM-DD",type:"date"});t.register.editor("custom-element-plus-date",i);let a=new l$({options:lJ,placeholder:"请选择",multiple:!1});t.register.editor("custom-single-select",a);let n=new l$({options:lY,placeholder:"请选择",multiple:!0});t.register.editor("custom-multiple-select",n),t.register.icon("add",{type:"svg",svg:eZ,width:16,height:16,name:"addIcon",positionType:t.TYPES.IconPosition.right,visibleTime:"mouseenter_cell",marginRight:10,hover:{width:16,height:16,bgColor:""},cursor:"pointer",tooltip:{style:{arrowMark:!0},title:"添加子记录",placement:t.TYPES.Placement.top,disappearDelay:2e3}}),t.register.icon("view",{type:"svg",svg:eG,width:16,height:16,name:"ViewIcon",positionType:t.TYPES.IconPosition.right,visibleTime:"mouseenter_cell",marginRight:0,hover:{width:16,height:16,bgColor:""},cursor:"pointer",tooltip:{style:{arrowMark:!0},title:"查看详情",placement:t.TYPES.Placement.top,disappearDelay:2e3}}),t.register.icon("more",{type:"svg",svg:eA,width:20,height:20,name:"moreIcon",positionType:t.TYPES.IconPosition.right,visibleTime:"always",marginRight:10,hover:{width:20,height:20,bgColor:"#f5f5f5"},cursor:"pointer",tooltip:{style:{arrowMark:!0},title:"更多操作",placement:t.TYPES.Placement.top,disappearDelay:2e3}})},l2={class:"actions-menu"},l4=["onClick"],l5={class:"action-item-content"},l3=["innerHTML"],l8=(0,i.pM)({__name:"MoreActionsPopup",props:{visible:{type:Boolean},position:{},actions:{}},emits:["close","action"],setup(e,t){let{emit:l}=t,a=t=>{if(e.visible){let e=document.querySelector(".more-actions-popup");e&&!e.contains(t.target)&&l("close")}};return(0,i.sV)(()=>{document.addEventListener("click",a)}),(0,i.hi)(()=>{document.removeEventListener("click",a)}),(e,t)=>e.visible?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"more-actions-popup",style:(0,i.Tr)({left:e.position.left+"px",top:e.position.top+"px"}),onClick:t[0]||(t[0]=(0,i.D$)(()=>{},["stop"]))},[(0,i.Lk)("div",l2,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.actions,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.key,class:"action-item",onClick:t=>{var i;console.log("handleAction",i=e.key),l("action",i),l("close")}},[(0,i.Lk)("div",l5,[e.icon?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"action-icon",innerHTML:e.icon},null,8,l3)):(0,i.Q3)("",!0),(0,i.Lk)("span",null,(0,i.v_)(e.label),1)])],8,l4))),128))])],4)):(0,i.Q3)("",!0)}}),l6=(0,n.default)(l8,[["__scopeId","data-v-04cc488a"]]),l9={class:"tree-table-container"},l7={class:"pagination-container"},ie=(0,i.pM)({__name:"index",props:{fields:{},activeTab:{},initialData:{},initialLinks:{},lineHeight:{},tableConfig:{},routerFields:{},timeScalesToShow:{},onAddNode:{type:Function},onDeleteNode:{type:Function},onUpdateNode:{type:Function},moreActions:{},onMoreAction:{type:Function}},emits:["update:initialData","update:saveField","view-node-detail","node-selected","show:records","edit-node","delete-node","add-child-node","show:parentRecord","on-more-action"],setup(e,t){var l;let{expose:a,emit:n}=t,o=(0,i.KR)(null),s=null,r=null,d=(0,i.KR)(""),u=(0,i.KR)([]),c=(0,i.KR)(1),v=(0,i.KR)(10),p=(0,i.KR)(0),h=(0,i.WQ)("showFieldConfigPopup"),g=(0,i.KR)(!1),m=(0,i.KR)({left:0,top:0}),f=(0,i.KR)(null),k=(0,i.KR)(-1),b=(0,i.KR)(-1),y=(0,i.KR)(!1),w=(0,i.KR)({left:0,top:0}),L=(0,i.KR)(null),C=(0,i.EW)(()=>e.moreActions||[]),R=(0,i.EW)(()=>C.value.length>0),x=(0,i.EW)(()=>{let t=[{unit:"year",step:1,format:e=>`${e.dateIndex}年`,style:{fontSize:12,fontWeight:"400",color:"#111827",textAlign:"center",backgroundColor:"#FFF"}},{unit:"month",step:1,format:e=>lN.Yl.formatDate(new Date(e.startDate),"yyyy年mm月"),style:{fontSize:12,fontWeight:"400",color:"#111827",textAlign:"center",backgroundColor:"#FFF"}},{unit:"week",step:1,startOfWeek:"monday",format:e=>`第 ${e.dateIndex} 周`,style:{fontSize:12,fontWeight:"400",color:"#111827",textAlign:"center",backgroundColor:"#FFF"}},{unit:"day",step:1,format:e=>lN.Yl.formatDate(new Date(e.startDate),"mm月dd日"),style:{fontSize:12,fontWeight:"400",color:"#111827",textAlign:"center",backgroundColor:"#FFF"}}];return e.timeScalesToShow&&0!==e.timeScalesToShow.length?t.filter(t=>{var l;return null==(l=e.timeScalesToShow)?void 0:l.includes(t.unit)}):t}),E=()=>{if(g.value&&k.value>=0&&b.value>=0&&s)try{var e;let t=s.getCellRect(b.value,k.value),l=null==(e=o.value)?void 0:e.getBoundingClientRect();if(t&&l){let e=(l.left||0)+(t.x||0)+(t.width||0)-20+(window.scrollX||0),i=(l.top||0)+(t.y||0)+(t.height||0)/2+(window.scrollY||0),a=e,n=i;a+160>window.innerWidth&&(a=window.innerWidth-160-10),a<0&&(a=10),n+200>window.innerHeight&&(n=window.innerHeight-200+20),n<0&&(n=10),m.value={left:a,top:n}}}catch(e){console.error("更新悬浮窗位置失败:",e),S()}},S=()=>{g.value=!1,f.value=null,k.value=-1,b.value=-1},D=()=>{y.value=!1,L.value=null},F=()=>{L.value&&(n("on-more-action","linkDelete",L.value),D())},_=e=>{f.value&&(n("on-more-action",e,f.value),S())},M=(t,l)=>{if(!l)return;let i=l.id?l.id.split("-").map(e=>parseInt(e,10)):[],a=1;l.children&&l.children.length>0&&(a=l.children.reduce((e,t)=>{let l=(t.id||t.no).split("-");return Math.max(e,parseInt(l[l.length-1],10)||0)},0)+1);let o=i.length>0?`${i.join("-")}-${a}`:`${a}`,s={id:o,no:o,name:"",priority:[],status:"",startDate:"",endDate:"",assignee:"",parentRecord:l.name,date:"",isChecked:!1,children:[]};if(e.onAddNode,t){let e=[...i.map(e=>e-1),a-1];l.children||(l.children=[]),t.addRecord(s,e)}n("update:initialData",u.value)},T=()=>{e.initialData?(u.value=JSON.parse(JSON.stringify(e.initialData)),p.value=e.initialData.length):(u.value=[],p.value=0)};T();let X=e=>{v.value=e,c.value=1,n("on-more-action","paginationSizeChange",null)},V=e=>{c.value=e,n("on-more-action","paginationCurrentChange",null)};(0,i.wB)(()=>e.initialData,e=>{T(),s&&s.setRecords(u.value),e&&(p.value=e.length)},{deep:!0});let H=()=>{var t;let l=(null==(t=e.tableConfig)?void 0:t.mode)==="gantt",i=36;switch(e.lineHeight){case"low":i=36;break;case"medium":i=60;break;case"high":i=90;break;case"ultra-high":i=130}(e.fields||[]).forEach((e,t)=>{t>0&&(l&&r?(r.setRowHeight(t,i),setTimeout(()=>{s.scenegraph.refreshAll()},100)):!l&&s&&s.setRowHeight(t,i))}),l&&e.tableConfig};(0,i.wB)(()=>e.lineHeight,()=>{s&&H()},{immediate:!0});let O=(0,i.EW)(()=>[]),W=t=>{var l,i,a,r,d,c,v,p,h,y,w,L,C,x;let E=(null==(l=e.tableConfig)?void 0:l.mode)==="gantt"?lN.L1:lH,S=(null==(i=e.tableConfig)||i.mode,t.field),D=t.type,F=!1;e.routerFields&&(F=e.routerFields.includes(S));let _=()=>{var l;return(null==(l=e.tableConfig)?void 0:l.typeIconShow)===!0?[{type:"svg",marginRight:4,positionType:lO.fE.contentLeft,width:14,height:14,svg:e$(t.type)}]:void 0};if(!S)return null;if("operations"===S)return(null==e||null==(a=e.tableConfig)?void 0:a.OperationsColumnMode)==="text"?{field:S,title:t.name,width:(null==e||null==(r=e.tableConfig)?void 0:r.OperationsColumnWidth)||"auto",style:{},customLayout:t=>{var l,i;let{table:a,row:o,col:r,rect:d}=t,{height:u,width:c}=d||a.getCellRect(r,o),v=new lW.Y({opacity:.1,width:c,height:u,display:"flex",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center"});return(null==(l=e.moreActions)?void 0:l.length)&&(null==(i=e.moreActions)||i.map(e=>{let t=new lK.v({text:e.label,textStyle:{fontSize:13,fontFamily:"sans-serif",fill:"#333",cursor:"pointer"},panel:{visible:!0,lineWidth:1,cornerRadius:8,fill:"rgba(255,255,255,0.01)"},boundsPadding:[0,0,0,10],padding:[3,6],pickable:!0,fillPickable:!0,strokePickable:!0,childrenPickable:!0,pickMode:"imprecise"});t.addEventListener("click",t=>{t.stopPropagation(),n("on-more-action",e.key,o)}),t.addEventListener("mouseenter",e=>{e.stopPropagation(),t.setAttributes({textStyle:{...t.attribute.textStyle,fill:"#409EFF"}}),s.render()}),t.addEventListener("mouseleave",e=>{e.stopPropagation(),t.setAttributes({textStyle:{...t.attribute.textStyle,fill:"#333"}}),s.render()}),v.add(t)})),{rootContainer:v,renderDefault:!1}},headerIcon:[{type:"svg",name:"setting",positionType:lO.fE.contentLeft,width:14,height:14,marginLeft:(null==e||null==(d=e.tableConfig)?void 0:d.OperationsColumnWidth)/2-35}]}:{field:S,title:"",width:34,style:{justifyContent:"center",padding:"0"},customLayout:(null==(c=e.moreActions)?void 0:c.length)?e=>{let{table:t,row:l,col:i,rect:a}=e,{height:n,width:s}=a||t.getCellRect(i,l),r=new lW.Y({width:s,height:n,display:"flex",alignItems:"center",justifyContent:"center"}),d=new lj.I({svg:eA,width:14,height:10,cursor:"pointer"});return r.add(d),d.addEventListener("click",e=>{var a;if(!R.value)return void e.stopPropagation();let n=t.getCellRect(i,l),s=null==(a=o.value)?void 0:a.getBoundingClientRect(),r=null==n?void 0:n.bounds;if(n&&s&&r){let e=(s.left||0)+(r.x1||0)+(n.width||0)-20+(window.scrollX||0),a=(s.top||0)+(r.y1||0)+(n.height||0)/2+(window.scrollY||0),o=e-140,d=a-20;o+160>window.innerWidth&&(o=window.innerWidth-160-10),o<0&&(o=10),d+200>window.innerHeight&&(d=window.innerHeight-200+20),d<0&&(d=10);let u={left:o,top:d};f.value=t.getRecordByRowCol(i,l),k.value=l,b.value=i,setTimeout(()=>{g.value=!0,m.value=u},100)}e.stopPropagation()}),{rootContainer:r,renderDefault:!1}}:void 0,headerIcon:[{type:"svg",name:"settingIcon",positionType:lO.fE.contentLeft,width:16,height:16,marginLeft:-2,svg:'<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="SettingOutlined"><path d="m4.328 19.734-.31-.34a10.91 10.91 0 0 1-2.386-4.146l-.135-.436L3.545 12 1.497 9.188l.135-.436a10.91 10.91 0 0 1 2.385-4.147l.311-.339 3.442.377 1.398-3.187.448-.101A10.843 10.843 0 0 1 12 1.09c.809 0 1.607.089 2.384.264l.448.1 1.398 3.188 3.442-.377.31.34a10.91 10.91 0 0 1 2.386 4.146l.135.436L20.455 12l2.048 2.812-.135.436a10.91 10.91 0 0 1-2.385 4.147l-.311.339-3.442-.377-1.398 3.187-.448.101a10.848 10.848 0 0 1-4.768 0l-.448-.1-1.398-3.188-3.442.377Zm3.485-2.21a1.488 1.488 0 0 1 1.525.881l1.12 2.554a9.05 9.05 0 0 0 3.084 0l1.12-2.554a1.488 1.488 0 0 1 1.524-.881l2.755.3c.665-.8 1.19-1.71 1.547-2.69l-1.644-2.258a1.488 1.488 0 0 1 0-1.752l1.644-2.258a9.091 9.091 0 0 0-1.547-2.69l-2.755.3a1.488 1.488 0 0 1-1.524-.881l-1.12-2.554a9.053 9.053 0 0 0-3.084 0l-1.12 2.554a1.488 1.488 0 0 1-1.525.881l-2.754-.3a9.09 9.09 0 0 0-1.548 2.69l1.645 2.258c.38.522.38 1.23 0 1.752l-1.644 2.258c.358.98.882 1.89 1.547 2.69l2.754-.3ZM12 16.545c-2.502 0-4.528-2.036-4.528-4.545 0-2.51 2.026-4.545 4.528-4.545S16.528 9.49 16.528 12 14.502 16.545 12 16.545Zm0-1.818c1.496 0 2.71-1.22 2.71-2.727A2.719 2.719 0 0 0 12 9.273 2.719 2.719 0 0 0 9.29 12 2.719 2.719 0 0 0 12 14.727Z" fill="currentColor"></path></svg>',cursor:"pointer"}]};switch(D){case"text":case"textarea":return{field:S,title:t.name,width:t.width||"auto",editor:(null==(v=e.tableConfig)?void 0:v.editable)?"input-editor":void 0,fieldFormat:e=>e[S]||"",style:{color:F?"#0070BA":"#333",cursor:F?"pointer":"default"},headerIcon:_()};case"multiple":return{field:S,title:t.name,width:t.width||"auto",editor:(null==(p=e.tableConfig)?void 0:p.editable)?"custom-multiple-select":void 0,fieldFormat:e=>e.priority.join(", "),style:{justifyContent:"center",borderRadius:"4px"},headerIcon:_(),customLayout:e=>{let{table:t,row:l,col:i,rect:a}=e,{height:n,width:o}=a||t.getCellRect(i,l),s=t.getRecordByRowCol(i,l),r=new E.Group({width:o,height:n,display:"flex",flexWrap:"wrap",justifyContent:"flex-start",alignContent:"center"}),d=new E.Group({opacity:.1,width:o,height:n,display:"flex",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center"});return s.priority.length&&s.priority.map(e=>{let t=new lK.v({text:e,textStyle:{fontSize:12,fontFamily:"sans-serif",fill:"#fff"},panel:{visible:!0,fill:lq[e],lineWidth:1,cornerRadius:8},boundsPadding:[0,0,0,10],padding:[3,6]});d.add(t)}),r.add(d),{rootContainer:r,renderDefault:!1}}};case"single":return{field:S,title:t.name,width:t.width||"auto",editor:(null==(h=e.tableConfig)?void 0:h.editable)?"custom-single-select":void 0,fieldFormat:e=>e.status,style:{justifyContent:"center",borderRadius:"4px"},headerIcon:_(),customLayout:e=>{let{table:t,row:l,col:i,rect:a}=e,{height:n,width:o}=a||t.getCellRect(i,l),s=t.getRecordByRowCol(i,l),r=new E.Group({opacity:.1,width:o,height:n,display:"flex",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center"}),d=new lK.v({text:s.status,textStyle:{fontSize:12,fontFamily:"sans-serif",fill:"#fff"},panel:{visible:!0,fill:l0[s.status],lineWidth:1,cornerRadius:10},boundsPadding:[0,0,0,10],padding:[4,10,4,10]});return r.add(d),{rootContainer:r,renderDefault:!1}}};case"date":return{field:S,title:t.name,width:t.width||((null==u||null==(y=u.value)?void 0:y.length)?140:"auto"),editor:(null==(w=e.tableConfig)?void 0:w.editable)?"custom-element-plus-date":void 0,fieldFormat:e=>e[S]||"",style:{},headerIcon:_()};case"checkbox":return{field:S,title:t.name,width:t.width||"auto",cellType:D,checked:t.checked||!1,disable:t.disable||!1,style:{justifyContent:"center"},headerIcon:_()};case"image":return{field:S,title:t.name,width:t.width||"auto",cellType:D,keepAspectRatio:!0,imageAutoSizing:!0,style:{justifyContent:"center"},headerIcon:_()};case"link":return{field:S,title:t.name,width:t.width||"auto",linkJump:t.linkJump||!1,cellType:D,templateLink:t.tableField||"",style:{justifyContent:"center"},headerIcon:_()};case"switch":return{field:S,title:t.name,width:t.width||"auto",cellType:D,checked:t.checked||!1,disable:t.disable||!1,checkedText:t.checkedText||"是",uncheckedText:t.uncheckedText||"否",style:{justifyContent:"center",color:"#fff",fontSize:12,switchStyle:{boxHeight:20}},headerIcon:_()};case"user":return{field:S,title:t.name,width:t.width||"auto",editor:(null==(L=e.tableConfig)?void 0:L.editable)?"custom-multiple-select":void 0,style:{justifyContent:"center"},customLayout:e=>{let l,{table:i,row:a,col:n,rect:o}=e,s=i.getRecordByRowCol(n,a)||{};console.log("record",s),console.log("filed",t);let r=String(s[S]||""),d=function(e){if(!e)return"";if(/[\u4e00-\u9fa5]/.test(e))return e.slice(-2);let t=e.trim().split(/\s+/);return 1===t.length?t[0].charAt(0).toUpperCase():t[0].charAt(0).toUpperCase()+t[1].charAt(0).toUpperCase()}(r),u=function(e){let t=0;for(let l=0;l<e.length;l++)t=e.charCodeAt(l)+((t<<5)-t)|0;let l=(0xffffff&t).toString(16).toUpperCase();return"#"+"00000".substring(0,6-l.length)+l}(r||"unknown"),c=(.2126*parseInt((l=(u||"#000000").replace("#","")).substring(0,2),16)+.7152*parseInt(l.substring(2,4),16)+.0722*parseInt(l.substring(4,6),16))/255>.9?"#000":"#fff",v=o||i.getCellRect(n,a)||{width:180,height:32},p=new E.Group({width:v.width,height:v.height,display:"flex",alignItems:"center"}),h=new E.Group({height:v.height,width:6}),g=new E.Group({width:25,height:25}),m=new E.Rect({width:25,height:25,fill:u,cornerRadius:12.5,boundsPadding:[0,4,0,4]}),f=new E.Text({text:d,fontSize:r&&/[\u4e00-\u9fa5]/.test(r)?Math.floor(10):Math.floor(15),fontWeight:"400",fill:c,textAlign:"center",textBaseline:"middle",x:12.5,y:12.5});g.add(m),g.add(f);let k=new E.Text({text:r,fontSize:14,fill:"#333",textBaseline:"middle",y:v.height/2,maxLineWidth:v.width-25-20,ellipsis:"..."});return p.add(h),p.add(g),p.add(k),{rootContainer:p,renderDefault:!1}},headerIcon:_()};case"progress":return{field:S,title:t.name,width:t.width||((null==u||null==(C=u.value)?void 0:C.length)?120:"auto"),style:{},customLayout:e=>{let t,l,i,a,n,{table:o,row:s,col:r,rect:d}=e,{height:u,width:c}=d||o.getCellRect(r,s),v=(o.getRecordByRowCol(r,s)||{}).progress||0,p=c-52,h=Math.round(v/100*p);t=new E.Group({width:c,height:u,display:"flex",alignItems:"center",flexDirection:"row"});let g=new E.Group({height:4,width:10}),m=new E.Group({height:4,width:4});return l=new E.Group({height:4,width:p}),i=new E.Rect({width:p,height:4,fill:"#F2F2F2"}),a=new E.Rect({width:h,height:4,fill:"#2BA471"}),n=new E.Text({text:`${v}%`,fontSize:12,fill:"#141414",textAlign:"center",textBaseline:"middle"}),t.add(g),l.add(i),l.add(a),t.add(n),t.add(m),t.add(l),{rootContainer:t,renderDefault:!1}},headerIcon:_()};case"fn":return{field:S,title:t.name,width:t.width||"auto",fieldFormat:e=>e[S]||"",style:{},headerIcon:_()};default:return{field:S,title:t.name,width:t.width||"auto",editor:(null==(x=e.tableConfig)?void 0:x.editable)?"input-editor":void 0,fieldFormat:e=>e[S]||"",style:{},headerIcon:_()}}},K=(0,i.EW)(()=>{var t;if(!e.fields||0===e.fields.length)return[];let l=[...O.value];if(e.fields.forEach(t=>{if("id"===t.name||!t.invisible)return;let i=W(t);if(i){var a,n;(null==e||null==(n=e.tableConfig)||null==(a=n.tree)?void 0:a.enabled)&&O.value.length+l.length===e.tableConfig.tree.column-1&&(i.tree=!0,i.style||(i.style={}),"wbs"===e.tableConfig.tree.mode&&(i.icon=["add","view"],i.width=240),"object"==typeof i.style&&(i.style.paddingLeft=e=>{let t=e.level||0;return`${20*t+10}px`})),l.push(i)}}),(null==e||null==(t=e.tableConfig)?void 0:t.showOperationsColumn)!==!1){let e=W({id:999,name:"操作",field:"operations",type:"string",invisible:!0});e&&l.push(e)}return l}),j={defaultStyle:{borderLineWidth:0},headerStyle:{bgColor:"#FFF",borderColor:"#f1e8fe",borderLineWidth:1,fontWeight:"normal",color:"#1f2329",fontSize:14,hover:{cellBgColor:"#F7F8FA"}},bodyStyle:{borderColor:"#f1e8fe",bgColor:"#FFF",borderLineWidth:1,color:"#1f2329",fontSize:13,hover:{cellBgColor:"#F7F8FA",inlineRowBgColor:"#F7F8FA",inlineColumnBgColor:"#F7F8FA"},select:{inlineRowBgColor:"#F7F8FA"}},selectionStyle:{cellBgColor:"rgba(255, 255, 255,0.1)",cellBorderLineWidth:2,cellBorderColor:"#3073f2"},frameStyle:{borderColor:"#f1e8fe",borderLineWidth:1,borderLineDash:[],cornerRadius:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#FFF",verticalSplitLine:{borderColor:"#f1e8fe",borderLineWidth:1}},cellInnerBorder:!1};(null==(l=e.tableConfig)?void 0:l.borderMode)==="none"&&(j.headerStyle.borderLineWidth=0,j.bodyStyle.borderLineWidth=[1,0],j.frameStyle.borderLineWidth=0,j.headerStyle={bgColor:"#FFF",borderColor:"#FFF",borderLineWidth:0,fontWeight:"normal",color:"#1f2329",fontSize:14,hover:{cellBgColor:"#FFF"}});let P=lP.ARCO.extends(j);function I(e){return null==e?null:Array.isArray(e)?[...e]:[e]}function B(e,t){if(!Array.isArray(e)||0===e.length)return!1;let l=t;for(let t=0;t<e.length;t++){var i;let a=e[t];if(!Array.isArray(l)&&!Array.isArray(l),!l||"number"!=typeof a||a<0||a>=l.length)return!1;if(t===e.length-1)break;l=null==(i=l[a])?void 0:i.children}return!0}let N=(0,i.EW)(()=>{var t,l,i,a,n,o;let s={rowResizeType:"row",rowResizeMode:"all",dragOrder:{dragHeaderMode:"row"},frozenColCount:3,rightFrozenColCount:1,overscrollBehavior:"none",hover:{highlightMode:"row",disableHeaderHover:!0},heightMode:"standard",tooltip:{isShowOverflowTextTooltip:!0},autoFillWidth:!0,autoFillHeight:!1,menu:{contextMenuItems:["添加子记录","删除"]},defaultHeaderRowHeight:36,defaultRowHeight:36,records:u.value,columns:K.value,widthMode:"standard",autoWrapText:!1,theme:P,editCellTrigger:"doubleclick",enableLineBreak:!0,tree:{childrenKey:"children"},select:{disableHeaderSelect:!0,disableSelect:!1},rowSeriesNumber:{width:"auto",format:()=>"",cellType:"checkbox",enableTreeCheckbox:!0,dragOrder:!1},scrollStyle:{scrollRailColor:"rgba(246,246,246,0.5)",visible:"scrolling",width:4,scrollSliderCornerRadius:2,scrollSliderColor:"#5cb85c"},emptyTip:{text:"暂无数据",textStyle:{fontSize:10,fontWeight:400,color:"#646a73",lineHeight:0},icon:{width:40,height:30}}},r=(null==(t=e.tableConfig)?void 0:t.mode)==="gantt",d=(null==(i=e.tableConfig)||null==(l=i.tree)?void 0:l.mode)==="wbs";if((r||d)&&(s.dataSource=A),(null==(a=e.tableConfig)?void 0:a.mode)==="gantt"){let t=s.defaultHeaderRowHeight||36,l=s.defaultRowHeight||36;s={...Object.fromEntries(Object.entries(s).filter(e=>{let[t]=e;return!["defaultHeaderRowHeight","defaultRowHeight"].includes(t)})),headerRowHeight:t,rowHeight:l,taskListTable:{dragOrder:{dragHeaderMode:"row"},menu:{contextMenuItems:["添加子记录","删除"]},tooltip:{isShowOverflowTextTooltip:!0},editCellTrigger:"doubleclick",theme:P,columns:K.value,tableWidth:(null==(o=e.tableConfig)||null==(n=o.taskListTable)?void 0:n.tableWidth)||360,minTableWidth:100,select:{disableHeaderSelect:!0,disableSelect:!1},hover:{highlightMode:"row",disableHeaderHover:!0}},tasksShowMode:lN.QE.pj.Tasks_Separate,taskBar:{selectable:!0,startDateField:"startDate",endDateField:"endDate",progressField:"progress",labelText:"{name} ({progress}%)",labelTextStyle:{fontFamily:"Arial, sans-serif",fontSize:12,textAlign:"left",color:"#FFF"},hoverBarStyle:{barOverlayColor:"rgba(255, 255, 255, 0.3)"},barStyle:{width:24,barColor:"#6366f1",completedBarColor:"#22c55e",cornerRadius:2,borderWidth:1,borderColor:"#d1d5db"},progressAdjustable:!1,milestoneStyle:{labelText:"{name}",fillColor:e=>e.record.progress>=100?"#597ef7":"#d6e4ff",borderLineWidth:0,width:16,labelTextStyle:{fontSize:12,color:"rgb(1, 43, 75)",textAlign:"left",padding:10}}},minDate:"",maxDate:"",frame:{verticalSplitLineMoveable:!0,outerFrameStyle:{cornerRadius:0},verticalSplitLine:{lineWidth:1,top:0,lineColor:"#d1d5db"},verticalSplitLineHighlight:{lineColor:"#3b82f6",lineWidth:1}},timelineHeader:{verticalLine:{lineWidth:1,lineColor:"#d1d5db"},horizontalLine:{lineWidth:1,lineColor:"#d1d5db"},backgroundColor:"#fff",colWidth:100,scales:x.value},timeline:{format:"YYYY-MM-DD",zoomLevels:[{label:"日",unit:"day",pixelPerUnit:60},{label:"周",unit:"week",pixelPerUnit:420},{label:"月",unit:"month",pixelPerUnit:1800},{label:"季",unit:"quarter",pixelPerUnit:5400},{label:"年",unit:"year",pixelPerUnit:21900}]},markLine:[{date:new Date().toISOString().slice(0,10),content:" 今天 ",contentStyle:{color:"#fff"},style:{lineWidth:.7,lineColor:"red",lineDash:[5,5]}}],grid:{verticalLine:{lineWidth:.5,lineColor:"#e1e4e8"},horizontalLine:{lineWidth:.5,lineColor:"#e1e4e8"}},dependency:{linkCreatable:!0,linkDeletable:!0,links:[]}}}if(e.tableConfig){let t=e.tableConfig;Object.keys(t).forEach(e=>{"object"!=typeof t[e]||null===t[e]||"object"!=typeof s[e]||null===s[e]||Array.isArray(t[e])||Array.isArray(s[e])?s[e]=t[e]:s[e]={...s[e],...t[e]}})}return s}),A=new lI.w({records:u.value,canChangeOrder:z,changeOrder:Z});function z(t,l){var i;let a=(null==(i=e.tableConfig)?void 0:i.mode)==="gantt"?r:s,n=a.getRecordIndexByCell(0,t+a.columnHeaderLevelCount),o=a.getRecordIndexByCell(0,l+a.columnHeaderLevelCount);return!!n&&!!o}function Z(t,l){try{var i;let a,o=(null==(i=e.tableConfig)?void 0:i.mode)==="gantt"?r:s,d=o.columnHeaderLevelCount||0,c=o.getRecordIndexByCell(0,t+d),v=o.getRecordIndexByCell(0,l+d),p=I(c),h=I(v),g=A.records;if(!B(p,g)||!B(h,g)&&h.length>1&&(1!==h.length||h[0]!==g.length)||function(e,t){if(e.length>=t.length)return!1;for(let l=0;l<e.length;l++)if(e[l]!==t[l])return!1;return!0}(p,h))return;let m=o.getRecordByCell(0,t+d),f=p.slice(0,-1),k=1===h.length?[]:h.slice(0,-1),b=p[p.length-1],y=h[h.length-1],w=f.length===k.length&&f.every((e,t)=>e===k[t]);if(1===p.length)A.deleteRecords([p]);else{let e=m.no;U(N.value.records,e)&&s.setRecords(N.value.records)}w&&b<y-1?y-=1:!w&&p[h.length-1]<h[h.length-1]&&(y+=1),0===k.length?(a=[y],A.addRecord(m,y)):((a=[...h])[a.length-1]=y,A.addRecordsForTree([m],a)),n("update:initialData",u.value)}catch(e){console.error("changeOrder 出现未捕获异常：",e)}}(0,i.KR)(new Set);let G=()=>{let t=[];if(!s||!u.value||0===u.value.length)return t;let l=function(i){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];i.forEach((i,n)=>{let o=[...a,n.toString()],d=!1;try{var u;let t=null;t=(null==(u=e.tableConfig)?void 0:u.mode)==="gantt"?null==r?void 0:r.getCellCheckboxState(0,n+1):null==s?void 0:s.getCellCheckboxState(0,n+1),d=!0===t||"object"==typeof t&&(null==t?void 0:t.checked)}catch(e){console.error("获取复选框状态失败:",e)}d&&t.push(i),i.children&&i.children.length>0&&l(i.children,o)})};return l(u.value),t},$=()=>{var t,l;if(o.value){if(s&&(s.release(),s=null),l1((null==(t=e.tableConfig)?void 0:t.mode)==="gantt"?"gantt":"normal"),(null==(l=e.tableConfig)?void 0:l.mode)==="gantt"){let t=(r=(s=new lN.NI(o.value,N.value)).taskListTableInstance).internalProps.dataSource;if(t.canChangeOrder=z,t.changeOrder=Z,!r)return;r.on("click_cell",t=>{let{targetIcon:l,col:i,row:a,field:s}=t;l&&"moreIcon"!==l.name&&S();let d=r.getCellInfo(i,a);if(l){if("addIcon"===l.name){let e=d.originData;e&&(M(r,e),"collapse"===r.getHierarchyState(i,a)&&r.toggleHierarchyState(i,a))}else if("ViewIcon"===l.name)(null==d?void 0:d.originData)&&n("on-more-action","view",d.originData);else if("deleteIcon"===l.name);else if("settingIcon"===l.name){var u;let e=null==(u=o.value)?void 0:u.getBoundingClientRect(),t={left:((null==e?void 0:e.right)||0)-50,top:((null==e?void 0:e.top)||0)-40},l={left:t.left-230,top:t.top};h&&h(l)}}else if("_vtable_rowSeries_number"===t.field){if(!d)return;let e=G();d.originData&&n("show:parentRecord",d.originData),n("show:records",e)}else if(a>0)e.routerFields&&e.routerFields.includes(s)&&n("on-more-action",s,d.originData);else if(S(),1===i)return}),r.on("dropdown_menu_click",t=>{let{col:l,row:i}=t,a=r.getCellInfo(l,i);if("添加子记录"===t.menuKey)M(r,a.originData),"collapse"===r.getHierarchyState(l,i)&&r.toggleHierarchyState(l,i);else if("删除"===t.menuKey){let l=r.getCellInfo(t.col,t.row).originData;e.onDeleteNode;{let e=l.no;U(N.value.records,e)&&r.setRecords(N.value.records)}n("update:initialData",u.value)}}),r.on("change_cell_value",e=>{n("on-more-action","change_cell_value",e)}),s.on("change_date_range",e=>{n("on-more-action","change_date_range",e)}),s.on("create_dependency_link",e=>{let{link:t}=e;n("on-more-action","linkAdd",t)}),s.on("contextmenu_dependency_link",e=>{(e=>{let{link:t,event:l}=e;if(L.value=t,!o.value)return;let i=o.value.getBoundingClientRect(),a=l.clientX-i.left+10,n=l.clientY-i.top+10;w.value={left:Math.min(a,i.width-120),top:Math.min(n,i.height-40)},setTimeout(()=>{y.value=!0},300)})(e)})}else(s=new lB.u(o.value,N.value)).on("click_cell",t=>{let{targetIcon:l,col:i,row:a,field:r}=t;l&&"moreIcon"!==l.name&&S();let d=s.getCellInfo(i,a);if(l){if("addIcon"===l.name){let e=d.originData;e&&(M(s,e),"collapse"===s.getHierarchyState(i,a)&&s.toggleHierarchyState(i,a))}else if("ViewIcon"===l.name)(null==d?void 0:d.originData)&&n("on-more-action","view",d.originData);else if("deleteIcon"===l.name);else if("settingIcon"===l.name){var u;let e=null==(u=o.value)?void 0:u.getBoundingClientRect(),t={left:((null==e?void 0:e.right)||0)-50,top:((null==e?void 0:e.top)||0)-40},l={left:t.left-230,top:t.top};h&&h(l)}}else if("_vtable_rowSeries_number"===t.field){if(!d)return;let e=G();d.originData&&n("show:parentRecord",d.originData),n("show:records",e)}else if(a>0)e.routerFields&&e.routerFields.includes(r)&&n("on-more-action",r,d.originData);else if(S(),1===i)return}),s.on("dropdown_menu_click",t=>{let{col:l,row:i}=t,a=s.getCellInfo(l,i);if("添加子记录"===t.menuKey)M(s,a.originData),"collapse"===s.getHierarchyState(l,i)&&s.toggleHierarchyState(l,i,!0);else if("删除"===t.menuKey){let l=s.getCellInfo(t.col,t.row).originData;e.onDeleteNode;{let e=l.no;U(N.value.records,e)&&s.setRecords(N.value.records)}n("update:initialData",u.value)}});s.on("change_cell_value",e=>{console.log("change_cell_value",e),n("update:saveField",u.value)}),H()}},Q=(e,t)=>{e.id=t,e.no=t,e.children&&e.children.length>0&&e.children.forEach((e,l)=>{Q(e,`${t}-${l+1}`)})},U=(e,t)=>{if(!e||!Array.isArray(e)||!t)return!1;for(let l=0;l<e.length;l++){let i=e[l];if(i.no===t){e.splice(l,1);let i=t.split("-");if(i.length>1){let t=i.slice(0,-1).join("-");for(let i=l;i<e.length;i++){let l=`${t}-${i+1}`;Q(e[i],l)}}else for(let t=l;t<e.length;t++)if(1===e[t].no.split("-").length){let l=`${t+1}`;Q(e[t],l)}return!0}if(i.children&&i.children.length>0&&U(i.children,t))return 0===i.children.length&&delete i.children,!0}return!1};a({addChildNode:M,updateLinks:t=>{var l;if((null==(l=e.tableConfig)?void 0:l.mode)==="gantt"&&s)try{t.forEach(e=>{let{linkedFromTaskKey:t,linkedToTaskKey:l,direction:i,id:a}=e;s.addLink({id:a,type:i,linkedFromTaskKey:t,linkedToTaskKey:l})})}catch(e){console.error("更新甘特图连线失败:",e)}},deleteLink:t=>{var l;(null==(l=e.tableConfig)?void 0:l.mode)==="gantt"&&s&&(s.deleteLink(t),setTimeout(()=>{s.scenegraph.refreshAll()},100))}}),(0,i.wB)(d,()=>{if(!s)return;let e=d.value.toLowerCase().trim();if(!e)return void s.setRecords(u.value);let t=(e,l)=>e.reduce((e,i)=>{let a=i.name.toLowerCase().includes(l)||i.assignee.toLowerCase().includes(l)||i.status.toLowerCase().includes(l);if(i.children&&i.children.length>0){let n=t(i.children,l);if(a||n.length>0){let t={...i};n.length>0&&(t.children=n),e.push(t)}}else a&&e.push({...i});return e},[]),l=t(u.value,e);s.setRecords(l)});let J=e=>{if(y.value){let t=document.querySelector(".link-delete-popup");t&&!t.contains(e.target)&&D()}};return(0,i.sV)(()=>{$(),H(),window.addEventListener("scroll",E),window.addEventListener("resize",E),document.addEventListener("click",J),void 0!==e.activeTab&&(0,i.wB)(()=>e.activeTab,e=>{2===e&&o.value&&($(),H())}),(0,i.wB)(()=>e.initialData,e=>{o.value&&(u.value=JSON.parse(JSON.stringify(e||[])),$(),H())},{deep:!0}),(0,i.wB)(()=>e.fields,()=>{o.value&&($(),H())},{deep:!0})}),(0,i.hi)(()=>{s&&(s.release(),s=null),window.removeEventListener("scroll",E),window.removeEventListener("resize",E),document.removeEventListener("click",J)}),(t,l)=>{var a,n,s,r,d,u,h,f,k,b,L,x,E;let D=(0,i.g2)("el-pagination");return(0,i.uX)(),(0,i.CE)("div",l9,[(0,i.Lk)("div",{ref_key:"tableContainer",ref:o,class:"table-container",style:(0,i.Tr)({height:null==e||null==(a=e.tableConfig)?void 0:a.tableH})},[y.value?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"link-delete-popup",style:(0,i.Tr)({left:w.value.left+"px",top:w.value.top+"px"}),onClick:l[0]||(l[0]=(0,i.D$)(()=>{},["stop"]))},[(0,i.Lk)("div",{class:"popup-content"},[(0,i.Lk)("div",{class:"delete-action",onClick:F},"删除连线")])],4)):(0,i.Q3)("",!0)],4),(0,i.Lk)("div",l7,[(null==(s=t.tableConfig)||null==(n=s.page)?void 0:n.enable)?((0,i.uX)(),(0,i.Wv)(D,{key:0,"current-page":c.value,"onUpdate:currentPage":l[1]||(l[1]=e=>c.value=e),"page-size":v.value,"onUpdate:pageSize":l[2]||(l[2]=e=>v.value=e),"page-sizes":null==(d=t.tableConfig)||null==(r=d.page)?void 0:r.pageSizes,size:null==(h=t.tableConfig)||null==(u=h.page)?void 0:u.size,disabled:null==(k=t.tableConfig)||null==(f=k.page)?void 0:f.disabled,background:null==(L=t.tableConfig)||null==(b=L.page)?void 0:b.background,layout:(null==(E=t.tableConfig)||null==(x=E.page)?void 0:x.layout)||"total, sizes, prev, pager, next, jumper",total:p.value,onSizeChange:X,onCurrentChange:V},null,8,["current-page","page-size","page-sizes","size","disabled","background","layout","total"])):(0,i.Q3)("",!0)]),R.value?((0,i.uX)(),(0,i.Wv)(l6,{key:0,visible:g.value,position:m.value,actions:C.value,onClose:S,onAction:_},null,8,["visible","position","actions"])):(0,i.Q3)("",!0)])}}}),it=(0,n.default)(ie,[["__scopeId","data-v-4a8ef58a"]]),il={class:"field-config-dialog"},ii={key:0,class:"dialog-header"},ia={class:"dialog-help-icon"},io=["innerHTML"],is={class:"field-list"},ir={class:"field-item-content"},id={class:"field-icon"},iu=["innerHTML"],ic={class:"field-name"},iv={key:0,class:"field-actions"},ip={class:"icon-btn"},ih=["onClick"],ig={class:"field-item-content"},im={class:"drag-handle"},ik=["innerHTML"],ib={class:"field-icon"},iy=["innerHTML"],iw={class:"field-name"},iL={class:"field-actions"},iC={class:"icon-btn"},iR={key:0,class:"icon-btn"},ix={class:"menu-item-content"},iE={class:"menu-item-content"},iS=(0,i.pM)({__name:"FieldConfigPopup",props:{fields:{},visible:{type:Boolean},position:{},fieldId:{}},emits:["close","fieldSelected","addField","updateFieldVisibility","updateField","deleteField","fieldReordered","editField","fieldsChange"],setup(e,t){let{emit:l}=t,a=(0,i.KR)(!1),n=(0,i.KR)(null),o=(0,i.KR)({left:0,top:0}),s=(0,i.KR)([]),r=(0,i.KR)(!1),d=(0,i.KR)(!1),u=(0,i.KR)(!1);(0,i.wB)(()=>e.fields,e=>{e.length>1&&(s.value=[...e.slice(1)])},{immediate:!0}),(0,i.wB)(()=>e.visible,e=>{e||(a.value=!1)});let c=e=>{if(a.value=!1,r.value=!0,e.target instanceof HTMLElement){let t=e.target.closest(".field-item");t&&t.classList.add("dragging")}},v=t=>{if(t.target instanceof HTMLElement){let e=t.target.closest(".field-item");e&&e.classList.remove("dragging")}r.value=!1;let i=[];e.fields.length>0&&(i.push({...e.fields[0]}),s.value.forEach(e=>{i.push({...e})}),l("fieldReordered",i),l("fieldsChange",i))},p=(t,i)=>{l("updateFieldVisibility",t.id,i);let a=[...e.fields],n=a.findIndex(e=>e.id===t.id);-1!==n&&(a[n]={...a[n],invisible:i},l("fieldsChange",a))},h=e=>{l("fieldSelected",e)},g=(e,t)=>{if(t.stopPropagation(),n.value=e,t.currentTarget instanceof HTMLElement){let e=t.currentTarget.getBoundingClientRect(),l=window.innerWidth,i=window.innerHeight,a=e.right+8,n=e.top+e.height/2-16;a+120>l&&(a=e.left-120-8),n+100>i&&(n=Math.max(0,i-100-34)),o.value={left:a,top:n}}a.value=!0},m=()=>{l("addField")},f=t=>{if(e.visible){var i,a;let e=document.querySelector(".field-config-popup"),n=document.querySelector(".field-context-menu");if(null==(a=t.target)||null==(i=a.closest(".icon-btn"))?void 0:i.querySelector('el-icon[class*="morefilled"]'))return;let o=e&&!e.contains(t.target),s=!n||!n.contains(t.target);o&&s&&l("close")}};return(0,i.sV)(()=>{document.addEventListener("click",f)}),(0,i.hi)(()=>{document.removeEventListener("click",f)}),(t,f)=>t.visible?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"field-config-popup",style:(0,i.Tr)({left:t.position.left+"px",top:t.position.top+"px"})},[(0,i.Lk)("div",il,[d.value?((0,i.uX)(),(0,i.CE)("div",ii,[f[6]||(f[6]=(0,i.Lk)("div",{class:"dialog-title"},"字段配置",-1)),(0,i.Lk)("div",ia,[(0,i.Lk)("div",{innerHTML:(0,i.R1)(eI)},null,8,io)])])):(0,i.Q3)("",!0),(0,i.Lk)("div",is,[t.fields.length?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"field-item border-b",onClick:f[1]||(f[1]=e=>h(t.fields[0]))},[(0,i.Lk)("div",ir,[(0,i.Lk)("div",{class:(0,i.C4)(["field-item-content-left",{invisible:!t.fields[0].invisible}])},[(0,i.Lk)("div",id,[(0,i.Lk)("div",{innerHTML:(0,i.R1)(e$)(t.fields[0].type)},null,8,iu)]),(0,i.Lk)("div",ic,(0,i.v_)(t.fields[0].name),1),(0,i.bF)((0,i.R1)(ej.t),{size:"14",class:"lock-icon"},{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.c_I))]),_:1})],2),d.value?((0,i.uX)(),(0,i.CE)("div",iv,[f[7]||(f[7]=(0,i.Lk)("div",null,null,-1)),(0,i.Lk)("div",ip,[(0,i.bF)((0,i.R1)(ej.t),{onClick:f[0]||(f[0]=(0,i.D$)(e=>g(t.fields[0],e),["stop"]))},{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.yGC))]),_:1})])])):(0,i.Q3)("",!0)])])):(0,i.Q3)("",!0),f[8]||(f[8]=(0,i.Lk)("div",{class:"draggable-list-divider"},null,-1)),t.fields.length>1?((0,i.uX)(),(0,i.Wv)((0,i.R1)(tm.A),{key:1,modelValue:s.value,"onUpdate:modelValue":f[2]||(f[2]=e=>s.value=e),"item-key":"id",class:(0,i.C4)(["draggable-list",{"is-dragging":r.value}]),"ghost-class":"ghost-class","chosen-class":"chosen-class",animation:"200",handle:".field-item",onStart:c,onEnd:v},{item:(0,i.k6)(e=>{let{element:t}=e;return[(0,i.Lk)("div",{class:"field-item sub-item",onClick:e=>h(t)},[(0,i.Lk)("div",ig,[(0,i.Lk)("div",{class:(0,i.C4)(["field-item-content-left",{invisible:!t.invisible}])},[(0,i.Lk)("div",im,[(0,i.Lk)("div",{innerHTML:(0,i.R1)(ez)},null,8,ik)]),(0,i.Lk)("div",ib,[(0,i.R1)(e$)(t.type)?((0,i.uX)(),(0,i.CE)("div",{key:0,innerHTML:(0,i.R1)(e$)(t.type)},null,8,iy)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",iw,(0,i.v_)(t.name),1)],2),(0,i.Lk)("div",iL,[(0,i.Lk)("div",iC,[t.invisible?((0,i.uX)(),(0,i.Wv)((0,i.R1)(ej.t),{key:0,onClick:(0,i.D$)(e=>p(t,!1),["stop"])},{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.Ss2))]),_:1},8,["onClick"])):((0,i.uX)(),(0,i.Wv)((0,i.R1)(ej.t),{key:1,onClick:(0,i.D$)(e=>p(t,!0),["stop"])},{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.LdN))]),_:1},8,["onClick"]))]),u.value?((0,i.uX)(),(0,i.CE)("div",iR,[(0,i.bF)((0,i.R1)(ej.t),{onClick:(0,i.D$)(e=>g(t,e),["stop"])},{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.yGC))]),_:1},8,["onClick"])])):(0,i.Q3)("",!0)])])],8,ih)]}),_:1},8,["modelValue","class"])):(0,i.Q3)("",!0),f[9]||(f[9]=(0,i.Lk)("div",{class:"draggable-list-divider"},null,-1))]),u.value?((0,i.uX)(),(0,i.CE)("button",{key:1,class:"add-field-btn",onClick:m},[...f[10]||(f[10]=[(0,i.Lk)("span",{class:"add-icon"},"+",-1),(0,i.eW)(" 新增字段 ",-1)])])):(0,i.Q3)("",!0)]),a.value&&n.value?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"field-context-menu",style:(0,i.Tr)({left:o.value.left+"px",top:o.value.top+"px"}),onClick:f[5]||(f[5]=(0,i.D$)(()=>{},["stop"]))},[(0,i.Lk)("div",{class:"menu-item border-b",onClick:f[3]||(f[3]=e=>{var t;return t=n.value,void(a.value=!1,l("editField",t))})},[(0,i.Lk)("div",ix,[(0,i.bF)((0,i.R1)(ej.t),null,{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.EDh))]),_:1}),f[11]||(f[11]=(0,i.Lk)("span",null,"编辑",-1))])]),(0,i.Lk)("div",{class:"menu-item delete",onClick:f[4]||(f[4]=t=>{var i;return i=n.value,void(a.value=!1,l("deleteField",i.id),l("fieldsChange",e.fields.filter(e=>e.id!==i.id)))})},[(0,i.Lk)("div",iE,[(0,i.bF)((0,i.R1)(ej.t),null,{default:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(j.epd))]),_:1}),f[12]||(f[12]=(0,i.Lk)("span",null,"删除",-1))])])],4)):(0,i.Q3)("",!0)],4)):(0,i.Q3)("",!0)}}),iD=(0,n.default)(iS,[["__scopeId","data-v-285f08a3"]]),iF=[{id:1,name:"项目编号",field:"projectNumber",type:"text",invisible:!0},{id:26,name:"任务名称",field:"name",type:"text",invisible:!0},{id:2,name:"申请标题",field:"applicationTitle",type:"textarea",invisible:!0},{id:4,name:"仿真学科",field:"simulationSubject",type:"text",invisible:!0},{id:5,name:"项目经理",field:"projectManager",type:"text",invisible:!0},{id:6,name:"几何模型版本",field:"geometricModelVersion",type:"text",invisible:!0},{id:30,name:"进度",field:"progress",type:"progress",invisible:!0},{id:7,name:"仿真执行人",field:"simulationExecutor",type:"text",invisible:!0},{id:8,name:"结果判断",field:"resultJudgment",type:"text",invisible:!0},{id:9,name:"风险等级",field:"riskLevel",type:"text",invisible:!0},{id:10,name:"逼近方案数",field:"approachingSolutions",type:"number",invisible:!0},{id:11,name:"优化意见",field:"optimizationOpinions",type:"text",invisible:!0},{id:12,name:"提出人",field:"proposer",type:"user",invisible:!0},{id:13,name:"需求部门",field:"demandDepartment",type:"text",invisible:!0},{id:14,name:"第一执行人",field:"firstExecutor",type:"text",invisible:!0},{id:15,name:"第二执行人",field:"secondExecutor",type:"text",invisible:!0},{id:16,name:"接收日期",field:"receiveDate",type:"date",invisible:!0},{id:17,name:"执行开始日期",field:"startDate",type:"date",invisible:!0},{id:18,name:"实际完成日期",field:"endDate",type:"date",invisible:!0},{id:19,name:"项目工期(日)",field:"projectDuration",type:"number",invisible:!0},{id:20,name:"任务状态",field:"taskStatus",type:"single",invisible:!0},{id:21,name:"趋势图",field:"trend",type:"link",linkJump:!0,invisible:!0},{id:22,name:"是否有最优结果",field:"hasOptimalResult",type:"checkbox",checked:!0,disable:!0,invisible:!0},{id:23,name:"是否已结束",field:"isEnded",type:"switch",checkedText:"是",uncheckedText:"否",checked:!0,disable:!0,invisible:!0},{id:24,name:"剩余天数",field:"remainingDays",type:"number",invisible:!0},{id:25,name:"任务序号",field:"no",type:"text",invisible:!0},{id:27,name:"优先级",field:"priority",type:"tags",invisible:!0},{id:28,name:"状态",field:"status",type:"text",invisible:!0},{id:29,name:"负责人",field:"assignee",type:"user",invisible:!0},{id:31,name:"项目类型",field:"type",type:"text",invisible:!0},{id:32,name:"项目描述",field:"projectDescription",type:"text",invisible:!0},{id:33,name:"父项目",field:"parentRecord",type:"text",invisible:!0},{id:34,name:"创建日期",field:"date",type:"date",invisible:!0},{id:35,name:"备注",field:"remark",type:"text",invisible:!0}],i_={class:"wbs-container"},iM={key:0},iT={class:"wbs-tree-container"},iX=(0,i.pM)({__name:"index",setup(e){let t=(0,i.KR)(1),l=(0,i.KR)([{id:1,title:"全部项目",icon:'<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="BitablekanbanOutlined"><path d="M4 16.5h4V20a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2v-7.5h4a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v10.5a2 2 0 0 0 2 2ZM8 4v10.5H4V4h4Zm6 0v16h-4V4h4Zm2 6.5V4h4v6.5h-4Z" fill="currentColor"></path></svg>',closable:!1},{id:2,title:"我管理的",icon:eN,closable:!1},{id:3,title:"我参与的",icon:eN,closable:!1},{id:4,title:"我收藏的",icon:eB,closable:!1},{id:5,title:"已归档",icon:eB,closable:!1}]),a=(0,i.KR)(iF.map(e=>({...e,options:e.options?e.options.map(e=>({...e,value:String(e.value)})):void 0}))),n=(0,i.KR)(["applicationTitle","simulationSubject"]),o=(0,i.KR)([{key:"view",label:"查看"},{key:"edit",label:"编辑"},{key:"delete",label:"删除"}]),s=(0,i.KR)({editable:!1,borderMode:"none",tableH:"calc(100vh - 130px)",page:{enable:!0},frozenColCount:3,rightFrozenColCount:1,tree:{enabled:!1,column:2},rowSeriesNumber:{}}),r=(0,i.KR)({add:{name:"添加",enable:!0},fieldConfig:!1,filter:!0,sort:!0,lineHeight:!0,search:!0}),d=(0,i.KR)(!1),u=(0,i.KR)(!1),c=(0,i.KR)({left:0,top:0}),v=(0,i.KR)([]),p=(0,i.KR)([]),h=(0,i.KR)("medium"),g=async()=>{try{await new Promise(e=>setTimeout(e,500)),a.value=iF.map(e=>({...e,options:e.options?e.options.map(e=>({...e,value:String(e.value)})):void 0}))}catch(e){console.error("获取字段数据失败:",e)}},m=async()=>{try{await new Promise(e=>setTimeout(e,500)),p.value=1===t.value?JSON.parse(JSON.stringify(e1)):[]}catch(e){console.error("获取表格数据失败:",e)}},f=(e,t)=>{console.log("添加节点:",e,t)},k=e=>{console.log("删除节点:",e)},b=(e,t,l)=>{console.log("更新节点:",e,t,l)},y=e=>{console.log("表格数据更新:",e)},w=(e,t)=>{let l=a.value.find(t=>t.id===e);l&&(l.invisible=t)},L=(e,t)=>{if(console.log("搜索关键词:",e),console.log("搜索字段:",t),!e.trim())return void m();let l=JSON.parse(JSON.stringify(e1)),i=(null==t?void 0:t.length)?t:["name","assignee","status"],a=t=>t.filter(t=>{let l=!1;for(let a of i)if(t[a]&&String(t[a]).toLowerCase().includes(e.toLowerCase())){l=!0;break}return t.children&&t.children.length>0?(t.children=a(t.children),l||t.children&&t.children.length>0):l});p.value=a(l)},C=(0,i.KR)([]),R=e=>{C.value=e},x=(e,t)=>{console.log("handleMoreAction",e,t),"delete"===e?k(t):"view"===e&&A(t)},E=(0,i.KR)([]),S=(0,i.KR)(!1),D=(0,i.KR)(!1),F=e=>{console.log("handleShowRecords",e),E.value=e,S.value=e.length>0,D.value=e.length>0},_=()=>{0!==E.value.length&&(E.value.forEach(e=>{k(e)}),E.value=[],S.value=!1,D.value=!1)},M=(e,t)=>{if(console.log("排序条件:",e,"排序方向:",t),!p.value.length)return;let l=JSON.parse(JSON.stringify(p.value)),i={task1:"name",task2:"description",assignee:"assignee",startDate:"startDate",endDate:"endDate",progress:"progress",delay:"isDelayed"}[e]||"name",a=e=>(e.forEach(e=>{e.children&&e.children.length>0&&(e.children=a(e.children))}),e.sort((e,l)=>{let a=e[i]||"",n=l[i]||"";return"string"==typeof a&&"string"==typeof n?"asc"===t?a.localeCompare(n):n.localeCompare(a):"number"==typeof a&&"number"==typeof n?"asc"===t?a-n:n-a:0}));if(C.value.length>0){console.log("基于选择的节点进行排序");let e=a(l),t=new Map;C.value.forEach(e=>{t.set(e.id,e)});let i=(e,t)=>!!t.has(e.id)||!!e.children&&e.children.some(e=>i(e,t)),n=[],o=[],s=new Set(t.keys());e.forEach(e=>{i(e,s)?n.push(e):o.push(e)}),p.value=[...n,...o]}else p.value=a(l)},T=(e,t)=>{if(console.log("筛选条件:",e,"排序方向:",t),!p.value.length)return;let l=JSON.parse(JSON.stringify(p.value)),i={task1:"name",task2:"description",assignee:"assignee",startDate:"startDate",endDate:"endDate",progress:"progress",delay:"isDelayed"}[e]||"name",a=e=>(e.forEach(e=>{e.children&&e.children.length>0&&(e.children=a(e.children))}),e.sort((e,l)=>{let a=e[i]||"",n=l[i]||"";return"string"==typeof a&&"string"==typeof n?"asc"===t?a.localeCompare(n):n.localeCompare(a):"number"==typeof a&&"number"==typeof n?"asc"===t?a-n:n-a:0}));p.value=a(l)},X=(e,t)=>{console.log("更新字段:",e,t);let l=a.value.find(t=>t.id===e);l&&(Object.assign(l,t),t.options&&("radio"===l.type||"multiple"===l.type)&&(console.log(`更新字段"${l.name}"的选项，刷新表格数据`),p.value=[...p.value]))},V=e=>{console.log("处理字段重排序:",e.map(e=>e.name)),a.value=[...e]},H=e=>{console.log("标签页添加:",e)},O=e=>{console.log("标签页移除:",e)},W=e=>{console.log("标签页排序:",e),l.value=e},K=e=>{console.log("标签页激活:",e),m()},j=e=>{console.log("行高已变更为:",e),h.value=e},P=e=>{v.value=JSON.parse(JSON.stringify(e)),console.log("字段配置已更新:",e),a.value=[...e]},I=(0,i.KR)("0%"),B=()=>{I.value="55%"},N=(0,i.KR)(),A=e=>{N.value=e,d.value=!0};return(0,i.Gt)("addRecord",e=>{p.value=[...e]}),(0,i.Gt)("showFieldConfigPopup",e=>{c.value=e,v.value=JSON.parse(JSON.stringify(a.value||[])),setTimeout(()=>{u.value=!u.value},100)}),(0,i.sV)(()=>{g(),m()}),(e,d)=>((0,i.uX)(),(0,i.CE)("div",i_,[(0,i.bF)(eK,{modelValue:t.value,"onUpdate:modelValue":d[1]||(d[1]=e=>t.value=e),items:l.value,onTabAdded:H,onTabRemoved:O,onTabSorted:W,onTabActivated:K},{content:(0,i.k6)(e=>{let{activeTab:t}=e;return[r.value?((0,i.uX)(),(0,i.CE)("div",iM,[(0,i.bF)(l_,{fields:a.value,visibleButtons:r.value,lineHeight:h.value,"search-fields":["applicationTitle"],onUpdateFieldVisibility:w,onUpdateField:X,onFieldReordered:V,onLineHeightChanged:j,onSearch:L,onFilter:T,onSort:M,onOpenAddRecordDialog:B},null,8,["fields","visibleButtons","lineHeight"]),(0,i.Lk)("div",iT,[(0,i.bF)(lV,{show:S.value,"selected-count":E.value.length,onDelete:_},{default:(0,i.k6)(()=>[...d[2]||(d[2]=[(0,i.Lk)("button",{class:"batch-btn"},"修改属性",-1),(0,i.Lk)("button",{class:"batch-btn"},"修改类型",-1)])]),_:1},8,["show","selected-count"]),(0,i.bF)(it,{fields:a.value,"initial-data":p.value,"line-height":h.value,"router-fields":n.value,"more-actions":o.value,tableConfig:s.value,"on-add-node":f,"on-delete-node":k,"on-update-node":b,"onUpdate:initialData":y,"onUpdate:saveField":y,onViewNodeDetail:A,"onShow:records":F,onNodeSelected:R,onOnMoreAction:x},null,8,["fields","initial-data","line-height","router-fields","more-actions","tableConfig"])]),(0,i.bF)(iD,{fields:v.value,position:c.value,visible:u.value,onClose:d[0]||(d[0]=e=>u.value=!1),onFieldsChange:P},null,8,["fields","position","visible"])])):(0,i.Q3)("",!0)]}),_:1},8,["modelValue","items"])]))}}),iV=(0,n.default)(iX,[["__scopeId","data-v-572c6ae7"]]),iH=(0,s.aE)({history:(0,s.LA)(),routes:[{path:"/",redirect:"/home"},{path:"/home",name:"Home",component:w},{path:"/table",name:"table",component:ex},{path:"/about",name:"About",component:K},{path:"/project",name:"Project",component:iV}]});var iO=l(58587),iW=l(519);let iK=(0,i.Ef)(o),ij=(0,a.Ey)();iK.use(iO.A,{locale:iW.A}),iK.use(ij),iK.use(iH),iK.provide("router",iH),iK.mount("#root")}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var l=n[e]={exports:{}};return a[e].call(l.exports,l,l.exports,o),l.exports}o.m=a,o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var l in t)o.o(t,l)&&!o.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},o.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e=[],o.O=(t,l,i,a)=>{if(l){a=a||0;for(var n=e.length;n>0&&e[n-1][2]>a;n--)e[n]=e[n-1];e[n]=[l,i,a];return}for(var s=1/0,n=0;n<e.length;n++){for(var[l,i,a]=e[n],r=!0,d=0;d<l.length;d++)(!1&a||s>=a)&&Object.keys(o.O).every(e=>o.O[e](l[d]))?l.splice(d--,1):(r=!1,a<s&&(s=a));if(r){e.splice(n--,1);var u=i();void 0!==u&&(t=u)}}return t},o.p="/",o.b=document.baseURI||self.location.href,t={410:0},o.O.j=e=>0===t[e],l=(e,l)=>{var i,a,[n,s,r]=l,d=0;if(n.some(e=>0!==t[e])){for(i in s)o.o(s,i)&&(o.m[i]=s[i]);if(r)var u=r(o)}for(e&&e(l);d<n.length;d++)a=n[d],o.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return o.O(u)},(i=self.webpackChunksdm_app=self.webpackChunksdm_app||[]).forEach(l.bind(null,0)),i.push=l.bind(null,i.push.bind(i));var s=o.O(void 0,["328","535","522"],function(){return o(27358)});s=o.O(s)})();